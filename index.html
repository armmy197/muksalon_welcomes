<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏ß‡∏¢‡∏°‡∏∏‡∏Å‡∏ã‡∏≤‡∏•‡∏≠‡∏ô</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏° Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Kanit', 'Sukhumvit Set', 'Sarabun', sans-serif;
        }
        
        body {
            background-color: #f9f0ff;
            color: #4a154b;
            line-height: 1.6;
            padding: 0;
            margin: 0;
            position: relative;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* ‡∏õ‡∏∏‡πà‡∏°‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏î‡πà‡∏ß‡∏ô */
        .quick-login {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .quick-login-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #4a154b;
            color: white;
            border: none;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s;
            z-index: 1001;
        }
        
        .quick-login-btn:hover {
            transform: scale(1.1);
            background: #6a1b6d;
        }
        
        /* Header */
        header {
            background: linear-gradient(135deg, #d291bc 0%, #ffdfd3 100%);
            padding: 15px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: relative;
            z-index: 10;
        }
        
        .header-content {
            text-align: center;
            margin-bottom: 10px;
        }
        
        .cute-float {
            animation: float 3s ease-in-out infinite;
            color: #4a154b;
            font-size: 1.8rem;
            text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.7);
            margin-bottom: 10px;
        }
        
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        .admin-panel {
            text-align: center;
        }
        
        .login-btn {
            background: #06C755;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .login-btn:hover {
            background: #05a848;
            transform: translateY(-2px);
        }
        
        .line-icon {
            background: white;
            color: #06C755;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.8rem;
        }
        
        .admin-only {
            display: none;
            margin-top: 10px;
        }
        
        .logged-in .admin-only {
            display: block;
        }
        
        .logout-btn {
            background: #ff4757;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 20px;
            cursor: pointer;
            margin-left: 8px;
            font-size: 0.8rem;
        }
        
        /* Navigation */
        nav {
            display: flex;
            justify-content: center;
            background: white;
            padding: 10px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        nav button {
            background: none;
            border: none;
            padding: 8px 15px;
            margin: 0 5px;
            cursor: pointer;
            font-size: 0.9rem;
            color: #4a154b;
            border-radius: 20px;
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        nav button:hover, nav button.active {
            background: #4a154b;
            color: white;
        }
        
        /* Mobile Menu Button - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏ß‡∏≤‡∏™‡∏∏‡∏î */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #4a154b;
            cursor: pointer;
            position: absolute;
            top: 15px;
            right: 15px;
            z-index: 100;
        }
        
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 99;
        }
        
        .overlay.active {
            display: block;
        }
        
        /* Pages */
        .page {
            display: none;
            padding: 20px 0;
            animation: fadeIn 0.5s;
        }
        
        .activePage {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .box {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 15px auto;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            max-width: 800px;
            position: relative;
            z-index: 5;
        }
        
        .box h2 {
            color: #4a154b;
            margin-bottom: 15px;
            text-align: center;
            border-bottom: 2px solid #ffdfd3;
            padding-bottom: 10px;
            font-size: 1.5rem;
        }
        
        .box h3 {
            color: #6a1b6d;
            margin: 10px 0;
            font-size: 1.2rem;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        button {
            background: #d291bc;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin: 5px;
            transition: all 0.3s;
            width: 100%;
        }
        
        button:hover {
            background: #b76e94;
            transform: translateY(-2px);
        }
        
        .delete-btn {
            background: #ff4757;
        }
        
        .delete-btn:hover {
            background: #ff2e43;
        }
        
        .service-item, .holiday-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .message {
            text-align: center;
            font-size: 1.1rem;
            color: #4a154b;
            padding: 15px;
        }
        
        /* Review Stars */
        .stars {
            color: #ffc107;
            font-size: 1.5rem;
            margin: 10px 0;
            text-align: center;
        }
        
        .stars span {
            cursor: pointer;
            transition: all 0.2s;
            margin: 0 2px;
        }
        
        .stars span:hover, .stars span.active {
            transform: scale(1.2);
            text-shadow: 0 0 5px rgba(255, 193, 7, 0.8);
        }
        
        /* Review Modal */
        .review-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 15px;
        }
        
        .review-modal-content {
            background: white;
            padding: 20px;
            border-radius: 15px;
            width: 100%;
            max-width: 500px;
            text-align: center;
            position: relative;
            z-index: 1001;
        }
        
        /* Gmail Configuration */
        .gmail-config {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .instructions {
            background: white;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 12px;
        }
        
        .instructions ol {
            text-align: left;
            padding-left: 20px;
            margin: 8px 0;
        }
        
        .instructions li {
            margin-bottom: 6px;
            font-size: 0.9rem;
        }
        
        .config-section {
            margin: 12px 0;
            text-align: left;
        }
        
        .config-section label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .test-result {
            margin-top: 12px;
            padding: 8px;
            border-radius: 5px;
            display: none;
            font-size: 0.9rem;
        }
        
        .test-result.success {
            background: #d4edda;
            color: #155724;
            display: block;
        }
        
        .test-result.error {
            background: #f8d7da;
            color: #721c24;
            display: block;
        }
        
        /* Booking Items */
        .booking-item {
            background: linear-gradient(135deg, #ffffff, #f8f9fa);
            padding: 15px;
            border-radius: 12px;
            margin: 12px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-left: 4px solid #d291bc;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .booking-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.15);
        }

        .booking-content {
            margin-bottom: 12px;
        }

        .booking-content p {
            margin: 6px 0;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .booking-content strong {
            color: #4a154b;
            display: inline-block;
            min-width: 70px;
        }

        .services-section {
            margin: 8px 0;
        }

        .services-list {
            background: #f9f0ff;
            padding: 8px 12px;
            border-radius: 6px;
            margin: 4px 0;
            list-style-type: none;
        }

        .services-list li {
            padding: 4px 0;
            border-bottom: 1px dashed #e0e0e0;
            position: relative;
            padding-left: 18px;
            font-size: 0.85rem;
        }

        .services-list li:before {
            content: "‚Ä¢";
            color: #d291bc;
            position: absolute;
            left: 0;
            font-size: 16px;
        }

        .services-list li:last-child {
            border-bottom: none;
        }

        .booking-actions {
            text-align: center;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #f0f0f0;
        }

        .delete-btn {
            background: linear-gradient(135deg, #ff4757, #ff2e43);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            width: auto;
        }

        .delete-btn:hover {
            background: linear-gradient(135deg, #ff2e43, #ff1e36);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(255, 71, 87, 0.3);
        }

        /* ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô */
        .notification {
            position: fixed;
            top: 15px;
            right: 15px;
            padding: 12px 16px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            min-width: 250px;
            max-width: 90%;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            animation: slideInRight 0.3s ease;
        }

        .notification.success {
            background: linear-gradient(135deg, #06C755, #05a848);
        }

        .notification.error {
            background: linear-gradient(135deg, #ff4757, #ff2e43);
        }

        .notification.warning {
            background: linear-gradient(135deg, #ffa502, #ff7e00);
        }

        .notification button {
            background: none;
            border: none;
            color: white;
            font-size: 16px;
            cursor: pointer;
            padding: 0;
            margin: 0;
            width: 18px;
            height: 18px;
            width: auto;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 8px;
            height: 8px;
            background: #f00;
            top: -10px;
            z-index: 9999;
            pointer-events: none;
        }

        /* Floating Icons */
        .floating-icon {
            position: fixed;
            font-size: 20px;
            z-index: -1;
            opacity: 0.7;
            animation: floatAround 20s infinite linear;
        }

        @keyframes floatAround {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }
            25% {
                transform: translate(100px, 100px) rotate(90deg);
            }
            50% {
                transform: translate(200px, 50px) rotate(180deg);
            }
            75% {
                transform: translate(100px, 150px) rotate(270deg);
            }
            100% {
                transform: translate(0, 0) rotate(360deg);
            }
        }

        /* Background Effects */
        .bg-effect {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            pointer-events: none;
        }

        .rotating-bg {
            background: linear-gradient(45deg, #ffdfd3, #d291bc, #f9f0ff, #ffdfd3);
            background-size: 400% 400%;
            animation: gradientRotate 15s ease infinite;
        }

        @keyframes gradientRotate {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        /* Progress Bar */
        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            position: relative;
        }
        
        .progress-step {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            z-index: 2;
            font-size: 0.8rem;
        }
        
        .progress-step.active {
            background: #d291bc;
        }
        
        .progress-step.completed {
            background: #4a154b;
        }
        
        .progress-bar::before {
            content: "";
            position: absolute;
            top: 12px;
            left: 0;
            right: 0;
            height: 2px;
            background: #ddd;
            z-index: 1;
        }
        
        .step-label {
            position: absolute;
            top: 30px;
            font-size: 0.7rem;
            text-align: center;
            width: 80px;
            left: -30px;
            display: none;
        }

        /* Security Badge */
        .security-badge {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 8px 12px;
            border-radius: 16px;
            font-size: 0.7rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* Service Selection */
        .service-selection {
            margin: 12px 0;
        }
        
        .service-option {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin: 6px 0;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .service-option:hover {
            background: #f9f0ff;
            border-color: #d291bc;
        }
        
        .service-option input {
            margin-right: 8px;
            width: auto;
        }
        
        .service-option label {
            flex: 1;
            cursor: pointer;
            font-size: 0.9rem;
        }

        /* Button Groups */
        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
        }
        
        .button-group button {
            flex: 1;
            min-width: 120px;
        }

        /* ‡πÄ‡∏°‡∏ô‡∏π‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏ß‡∏≤‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• */
        .mobile-nav {
            display: none;
            position: fixed;
            top: 0;
            right: -300px; /* ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ô‡∏≠‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤ */
            width: 280px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
            z-index: 100;
            transition: right 0.3s ease;
            padding-top: 70px;
        }
        
        .mobile-nav.active {
            right: 0; /* ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ */
        }
        
        .mobile-nav button {
            display: block;
            width: 100%;
            padding: 15px 20px;
            text-align: left;
            border: none;
            background: none;
            border-bottom: 1px solid #f0f0f0;
            font-size: 1rem;
            color: #4a154b;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .mobile-nav button:hover, .mobile-nav button.active {
            background: #4a154b;
            color: white;
        }
        
        .mobile-nav-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #4a154b;
            cursor: pointer;
        }

       /* Review Items Styling */
.review-item {
    background: linear-gradient(135deg, #ffffff, #f8f9fa);
    padding: 15px;
    border-radius: 12px;
    margin: 12px 0;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    border-left: 4px solid #ffc107;
    position: relative;
}

.review-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.reviewer-name {
    font-weight: bold;
    color: #4a154b;
    font-size: 1.1rem;
}

.review-date {
    font-size: 0.8rem;
    color: #888;
}

.review-actions {
    text-align: right;
    margin-top: 10px;
    padding-top: 10px;
    border-top: 1px solid #f0f0f0;
}

.review-actions .delete-btn {
    width: auto;
    padding: 6px 12px;
    font-size: 0.8rem;
}

.review-actions .delete-btn i {
    margin-right: 5px;
}

        /* Firebase Config Section */
        .firebase-config {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        /* Time Slots Styling */
        .time-slots {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .time-slot {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .time-slot:hover {
            background: #f9f0ff;
            border-color: #d291bc;
        }

        .time-slot.selected {
            background: #d291bc;
            color: white;
            border-color: #d291bc;
        }

        .time-slot.booked {
            background: #ff6b6b;
            color: white;
            border-color: #ff6b6b;
            cursor: not-allowed;
        }

        .time-slot.booked:hover {
            background: #ff6b6b;
        }

        /* Promo Items Styling */
        .promo-item {
            background: linear-gradient(135deg, #ffffff, #f8f9fa);
            padding: 15px;
            border-radius: 12px;
            margin: 12px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-left: 4px solid #d291bc;
            position: relative;
        }

        .promo-image {
            width: 100%;
            max-height: 200px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .promo-title {
            font-weight: bold;
            color: #4a154b;
            font-size: 1.2rem;
            margin-bottom: 8px;
        }

        .promo-description {
            color: #6a1b6d;
            line-height: 1.5;
        }

        /* Responsive Design */
        @media (min-width: 768px) {
            .container {
                padding: 0 20px;
            }
            
            header {
                padding: 20px 0;
            }
            
            .cute-float {
                font-size: 2.2rem;
            }
            
            nav button {
                padding: 10px 20px;
                margin: 0 10px;
                font-size: 1rem;
            }
            
            .page {
                padding: 30px 0;
            }
            
            .box {
                padding: 25px;
                margin: 20px auto;
            }
            
            .box h2 {
                font-size: 1.8rem;
                margin-bottom: 20px;
            }
            
            button {
                width: auto;
            }
            
            .button-group {
                flex-wrap: nowrap;
            }
            
            .step-label {
                display: block;
            }
            
            .progress-step {
                width: 30px;
                height: 30px;
                font-size: 1rem;
            }
            
            .progress-bar::before {
                top: 15px;
            }
            
            /* ‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏ö‡∏ô‡πÄ‡∏î‡∏™‡∏Å‡πå‡∏ó‡πá‡∏≠‡∏õ */
            .mobile-menu-btn, .mobile-nav {
                display: none;
            }
        }

        @media (max-width: 767px) {
            /* ‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏õ‡∏Å‡∏ï‡∏¥‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
            nav {
                display: none;
            }
            
            /* ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
            .mobile-menu-btn {
                display: block;
            }
            
            /* ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏ô‡∏π‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
            .mobile-nav {
                display: block;
            }
            
            .container {
                padding: 0 10px;
            }
            
            .cute-float {
                font-size: 1.5rem;
            }
            
            .login-btn {
                padding: 8px 15px;
                font-size: 0.8rem;
            }
            
            .box {
                padding: 15px;
                margin: 10px auto;
            }
            
            .booking-item {
                padding: 12px;
            }
            
            .notification {
                min-width: calc(100% - 30px);
                right: 15px;
                left: 15px;
            }
            
            .security-badge {
                bottom: 70px;
                left: 10px;
                right: 10px;
                text-align: center;
            }
            
            .time-slots {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 480px) {
            .cute-float {
                font-size: 1.3rem;
            }
            
            .box {
                padding: 12px;
                margin: 8px auto;
            }
            
            .mobile-nav {
                width: 250px;
            }
            
            .time-slots {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Background Effects -->
    <div class="bg-effect rotating-bg"></div>
    
    <!-- Floating Icons -->
    <div id="floatingIcons"></div>
    
    <!-- Confetti Container -->
    <div id="confettiContainer"></div>
    
    <!-- Security Badge -->
    <div class="security-badge">
        <i class="fas fa-shield-alt" style="color: #4a154b;"></i>
        <span>‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏±‡∏ö</span>
    </div>
    
    <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏î‡πà‡∏ß‡∏ô -->
    <div class="quick-login">
        <button class="quick-login-btn" onclick="quickLogin()">üîë</button>
    </div>

    <header>
        <div class="container">
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">‚ò∞</button>
            <div class="header-content">
                <h1 class="cute-float">‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏ß‡∏¢‡∏°‡∏∏‡∏Å‡∏ã‡∏≤‡∏•‡∏≠‡∏ô üíñ</h1>
            <div class="admin-panel">
                <button id="loginBtn" class="login-btn" onclick="loginWithLine()">
                    <span class="line-icon">L</span> ‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô
                </button>
                <div id="adminMenu" class="admin-only">
                    <button onclick="showPage('manage')">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≤‡∏ô</button>
                    <button class="logout-btn" onclick="logout()">‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏≠‡∏≤‡∏ó‡πå</button>
                </div>
            </div>
        </div>
    </header>

    <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏õ‡∏Å‡∏ï‡∏¥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡∏™‡∏Å‡πå‡∏ó‡πá‡∏≠‡∏õ -->
    <nav id="mainNav">
        <button class="active" onclick="showPage('home')">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
        <button onclick="showPage('booking')">‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß</button>
        <button onclick="showPage('promo')">‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô</button>
        <button onclick="showPage('reviews')">‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</button>
    </nav>

    <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà -->
    <div class="mobile-nav" id="mobileNav">
        <button class="mobile-nav-close" onclick="toggleMobileMenu()">√ó</button>
        <button class="active" onclick="showPage('home')">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
        <button onclick="showPage('booking')">‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß</button>
        <button onclick="showPage('promo')">‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô</button>
        <button onclick="showPage('reviews')">‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</button>
    </div>

    <div class="overlay" id="overlay" onclick="toggleMobileMenu()"></div>

    <div class="container">
        <!-- ‡∏´‡∏ô‡πâ‡∏≤ Home -->
        <div id="home" class="page activePage">
            <div class="box">
                <h2>‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏£‡πâ‡∏≤‡∏ô</h2>
                <ul id="servicesList" style="text-align:left; list-style-type: none; padding: 0;"></ul>
                <div class="admin-only">
                    <h3>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h3>
                    <input type="text" id="newServiceName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£">
                    <input type="text" id="newServicePrice" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤">
                    <button onclick="addService()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</button>
                </div>

                <h3>‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô</h3>
                <ul id="holidayList" style="color:red; text-align:left; list-style-type: none; padding: 0;"></ul>
                <div class="admin-only">
                    <input type="date" id="newHoliday">
                    <button onclick="addHoliday()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</button>
                </div>
            </div>
        </div>

        <!-- ‡∏´‡∏ô‡πâ‡∏≤ Booking - ‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß -->
        <div id="booking" class="page">
            <div class="box">
                <h2>‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß üíá‚Äç‚ôÄÔ∏è</h2>
                
                <div class="booking-form">
                    <div class="form-section">
                        <h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ üë§</h3>
                        <input type="text" id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
                        <input type="tel" id="phone" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå">
                    </div>
                    
                    <div class="form-section">
                        <h3>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ üíá‚Äç‚ôÄÔ∏è</h3>
                        <div id="serviceSelection" class="service-selection"></div>
                    </div>
                    
                    <div class="form-section">
                        <h3>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ üìÖ</h3>
                        <input type="date" id="date">
                        <div class="time-slots" id="timeSlots"></div>
                    </div>
                    
                    <div class="button-group">
                        <button onclick="submitBooking()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô -->
        <div id="promo" class="page">
            <div class="box">
                <h2>‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô</h2>
                <div id="promoContent"></div>

                <div class="admin-only">
                    <h3>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô</h3>
                    <input type="text" id="promoTitle" placeholder="‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô">
                    <textarea id="promoDescription" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô" rows="3"></textarea>
                    <input type="file" id="promoImageFile" accept="image/*">
                    <button onclick="addPromo()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô</button>
                </div>
            </div>
        </div>

        <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏µ‡∏ß‡∏¥‡∏ß -->
        <div id="reviews" class="page">
            <div class="box">
                <h2>‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h2>
                <div id="reviewsList"></div>
            </div>
        </div>

        <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≤‡∏ô -->
        <div id="manage" class="page">
            <div class="box">
                <h2>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≤‡∏ô</h2>
                <div class="button-group">
                    <button onclick="showPage('home')">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</button>
                    <button onclick="showPage('promo')">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô</button>
                </div>

                <div class="box">
                    <h2>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•</h2>
                    <div class="gmail-config">
                        <div class="config-section">
                            <label for="emailJSPublicKey">EmailJS Public Key:</label>
                            <input type="text" id="emailJSPublicKey" placeholder="‡πÉ‡∏™‡πà Public Key">
                        </div>

                        <div class="config-section">
                            <label for="emailJSServiceID">EmailJS Service ID:</label>
                            <input type="text" id="emailJSServiceID" placeholder="‡πÉ‡∏™‡πà Service ID">
                        </div>

                        <div class="config-section">
                            <label for="emailJSTemplateID">EmailJS Template ID:</label>
                            <input type="text" id="emailJSTemplateID" placeholder="‡πÉ‡∏™‡πà Template ID">
                        </div>

                        <div class="config-section">
                            <label for="adminEmail">‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô:</label>
                            <input type="email" id="adminEmail" placeholder="‡πÉ‡∏™‡πà‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô">
                        </div>

                        <div class="button-group">
                            <button onclick="saveEmailConfig()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</button>
                            <button onclick="testEmailConnection()">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠</button>
                        </div>

                        <div id="testResult" class="test-result"></div>
                    </div>
                </div>

                <div class="box">
                    <h2>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Firebase</h2>
                    <div class="firebase-config">
                        <div class="config-section">
                            <label for="firebaseConfig">Firebase Configuration:</label>
                            <textarea id="firebaseConfig" placeholder='{"apiKey": "...", "authDomain": "...", "projectId": "...", "storageBucket": "...", "messagingSenderId": "...", "appId": "..."}' rows="6"></textarea>
                        </div>
                        <div class="button-group">
                            <button onclick="saveFirebaseConfig()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Firebase</button>
                            <button onclick="testFirebaseConnection()">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Firebase</button>
                        </div>
                        <div id="firebaseTestResult" class="test-result"></div>
                    </div>
                </div>

                <h3>‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
                <div id="bookingList"></div>

                <h3>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</h3>
                <div id="reviewsManagementList"></div>
            </div>
        </div>
    </div>

    <!-- Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß -->
    <div class="review-modal" id="reviewModal">
        <div class="review-modal-content">
            <h2>‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h2>
            <input type="text" id="reviewerName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)">
            <div class="stars" id="modalStars">
                <span onclick="setModalRating(1)">‚òÖ</span>
                <span onclick="setModalRating(2)">‚òÖ</span>
                <span onclick="setModalRating(3)">‚òÖ</span>
                <span onclick="setModalRating(4)">‚òÖ</span>
                <span onclick="setModalRating(5)">‚òÖ</span>
            </div>
            <textarea id="reviewComment" placeholder="‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô (‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)" rows="3"></textarea>
            <div class="button-group">
                <button onclick="submitReview()">‡∏™‡πà‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</button>
            </div>
            <p id="thanksMsg"></p>
        </div>
    </div>

    <!-- Load EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3.2.0/dist/email.min.js"></script>

    <script>
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà
        function toggleMobileMenu() {
            const mobileNav = document.getElementById("mobileNav");
            const overlay = document.getElementById("overlay");
            
            mobileNav.classList.toggle("active");
            overlay.classList.toggle("active");
            
            // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏Å‡∏£‡∏≠‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏õ‡∏¥‡∏î
            document.body.style.overflow = mobileNav.classList.contains("active") ? "hidden" : "";
        }
        
        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Firebase Configuration ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á - ‡∏¢‡πâ‡∏≤‡∏¢‡∏°‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏™‡∏∏‡∏î
        const firebaseConfig = { 
            apiKey: "AIzaSyCHDTfUAYl_3QNltoDomAZip369XRePm08",
            authDomain: "muksalon-welcome529.firebaseapp.com",
            projectId: "muksalon-welcome529",
            storageBucket: "muksalon-welcome529.firebasestorage.app",
            messagingSenderId: "763113739059",
            appId: "1:763113739059:web:b3632852dab45f66522446"
        };

        // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ global
        let booking = {};
        let bookingLocked = false;
        let currentRating = 0;
        let isLoggedIn = localStorage.getItem('isLoggedIn') === 'true' || false;

        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô - ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å Firebase ‡πÅ‡∏ó‡∏ô localStorage
        let holidays = [];
        let services = [];
        let promotions = [];
        let reviews = [];
        let bookings = [];

        // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Firebase
        let db = null;
        let firebaseInitialized = false;

        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Email
        let emailConfig = {
            publicKey: 'gxAXWtkmg5TT3Rm-E',
            serviceID: 'service_muk157',
            templateID: 'template_muk157',
            adminEmail: 'muksalonwelcomes@gmail.com'
        };

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Firebase - ‡∏¢‡πâ‡∏≤‡∏¢‡∏°‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏Å‡πà‡∏≠‡∏ô DOMContentLoaded
        function initializeFirebase(config) {
            try {
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Firebase ‡∏ñ‡∏π‡∏Å‡πÇ‡∏´‡∏•‡∏î‡∏°‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
                if (typeof firebase === 'undefined') {
                    console.error("‚ùå Firebase SDK ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÇ‡∏´‡∏•‡∏î");
                    return false;
                }
                
                // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ñ‡∏¢‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏´‡πâ‡∏•‡∏ö‡πÅ‡∏≠‡∏õ‡πÄ‡∏Å‡πà‡∏≤‡∏Å‡πà‡∏≠‡∏ô
                if (firebase.apps.length > 0) {
                    firebase.app().delete();
                }
                
                firebase.initializeApp(config);
                db = firebase.firestore();
                firebaseInitialized = true;
                console.log("‚úÖ Firebase ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
                return true;
            } catch (error) {
                console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Firebase:", error);
                firebaseInitialized = false;
                return false;
            }
        }

        // ‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å localStorage ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
        try {
            const savedConfig = localStorage.getItem('emailConfig');
            if (savedConfig) {
                const parsedConfig = JSON.parse(savedConfig);
                Object.keys(parsedConfig).forEach(key => {
                    if (parsedConfig[key]) {
                        emailConfig[key] = parsedConfig[key];
                    }
                });
            }
        } catch (e) {
            console.log('‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô');
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
        window.addEventListener('DOMContentLoaded', (event) => {
            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Firebase ‡∏î‡πâ‡∏ß‡∏¢ config ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÑ‡∏ß‡πâ
            initializeFirebase(firebaseConfig);
            
            // ‡πÅ‡∏™‡∏î‡∏á Firebase Config ‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≤‡∏ô
            document.getElementById('firebaseConfig').value = JSON.stringify(firebaseConfig, null, 2);
            
            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô EmailJS ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ
            if (emailConfig.publicKey && emailConfig.publicKey !== 'your_public_key_here') {
                emailjs.init(emailConfig.publicKey);
            }
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°
            document.getElementById('emailJSPublicKey').value = emailConfig.publicKey;
            document.getElementById('emailJSServiceID').value = emailConfig.serviceID;
            document.getElementById('emailJSTemplateID').value = emailConfig.templateID;
            document.getElementById('adminEmail').value = emailConfig.adminEmail;
            
            // ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏´‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏¢‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÑ‡∏ß‡πâ
            if (isLoggedIn) {
                document.body.classList.add('logged-in');
            }
            
            // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Firebase ‡∏ñ‡πâ‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß
            if (firebaseInitialized) {
                loadDataFromFirebase();
            } else {
                // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å localStorage ‡πÄ‡∏õ‡πá‡∏ô fallback
                loadDataFromLocalStorage();
            }
            
            renderHolidays();
            renderServices();
            renderPromotions();
            renderReviews();
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏•‡∏π‡∏Å‡πÄ‡∏•‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©
            createFloatingIcons();
            createParticles();
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
            showPage('booking');
            
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ min date ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö input date
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('date').min = today;
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏° event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
            document.getElementById('date').addEventListener('change', function() {
                renderTimeSlots(this.value);
            });
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
            renderServicesForBooking();
        });

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á time slots
        function renderTimeSlots(date) {
            const timeSlotsContainer = document.getElementById('timeSlots');
            timeSlotsContainer.innerHTML = '';
            
            if (!date) return;
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            if (holidays.includes(date)) {
                timeSlotsContainer.innerHTML = '<p style="color: red; text-align: center;">‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏£‡πâ‡∏≤‡∏ô‡∏õ‡∏¥‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏≠‡∏∑‡πà‡∏ô</p>';
                return;
            }
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á time slots ‡∏à‡∏≤‡∏Å 8:00 ‡∏ñ‡∏∂‡∏á 20:00
            for (let h = 8; h <= 20; h++) {
                const timeSlot = document.createElement('div');
                timeSlot.className = 'time-slot';
                timeSlot.textContent = `${h}:00`;
                timeSlot.dataset.time = `${h}:00`;
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                const isBooked = bookings.some(booking => 
                    booking.date === date && booking.time === `${h}:00`
                );
                
                if (isBooked) {
                    timeSlot.classList.add('booked');
                    timeSlot.innerHTML = `${h}:00<br><small>‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß</small>`;
                } else {
                    timeSlot.addEventListener('click', function() {
                        // ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏î‡∏¥‡∏°
                        document.querySelectorAll('.time-slot.selected').forEach(slot => {
                            slot.classList.remove('selected');
                        });
                        
                        // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
                        this.classList.add('selected');
                        booking.time = this.dataset.time;
                    });
                }
                
                timeSlotsContainer.appendChild(timeSlot);
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Firebase - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
        function saveFirebaseConfig() {
            const configText = document.getElementById('firebaseConfig').value;
            try {
                const config = JSON.parse(configText);
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏£‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                const requiredFields = ['apiKey', 'authDomain', 'projectId', 'storageBucket', 'messagingSenderId', 'appId'];
                const missingFields = requiredFields.filter(field => !config[field]);
                
                if (missingFields.length > 0) {
                    showNotification('‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô: ' + missingFields.join(', '), 'error');
                    return;
                }
                
                localStorage.setItem('firebaseConfig', configText);
                
                // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤ config ‡πÉ‡∏´‡∏°‡πà
                Object.assign(firebaseConfig, config);
                
                // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Firebase ‡πÉ‡∏´‡∏°‡πà
                const success = initializeFirebase(firebaseConfig);
                
                if (success) {
                    showNotification('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Firebase ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
                    // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å Firebase
                    loadDataFromFirebase();
                } else {
                    showNotification('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Firebase ‡πÑ‡∏î‡πâ', 'error');
                }
            } catch (error) {
                console.error('Error parsing Firebase config:', error);
                showNotification('‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Firebase ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: ' + error.message, 'error');
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Firebase - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡πâ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
        function testFirebaseConnection() {
            const testResult = document.getElementById('firebaseTestResult');
            testResult.style.display = 'block';
            testResult.className = 'test-result';
            testResult.innerHTML = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠...';

            if (!firebaseInitialized || !db) {
                testResult.classList.add('error');
                testResult.innerHTML = '‚ùå Firebase ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡πà‡∏≠‡∏ô';
                return;
            }

            // ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• - ‡πÉ‡∏ä‡πâ collection ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
            db.collection('services').limit(1).get()
                .then((snapshot) => {
                    testResult.classList.add('success');
                    testResult.innerHTML = '‚úÖ ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Firebase ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à';
                    showNotification('‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Firebase ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');
                })
                .catch(error => {
                    testResult.classList.add('error');
                    testResult.innerHTML = '‚ùå ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Firebase ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß: ' + error.message;
                    showNotification('‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö Firebase ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß', 'error');
                });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Firebase - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡πâ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
        function loadDataFromFirebase() {
            if (!firebaseInitialized || !db) {
                console.warn("Firebase ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏° ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å localStorage ‡πÅ‡∏ó‡∏ô");
                loadDataFromLocalStorage();
                return;
            }

            // ‡πÇ‡∏´‡∏•‡∏î‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
            db.collection('services').get()
                .then(snapshot => {
                    services = [];
                    snapshot.forEach(doc => {
                        services.push({ id: doc.id, ...doc.data() });
                    });
                    renderServices();
                    renderServicesForBooking(); // ‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
                })
                .catch(error => {
                    console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£:", error);
                });

            // ‡πÇ‡∏´‡∏•‡∏î‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î
            db.collection('holidays').get()
                .then(snapshot => {
                    holidays = [];
                    snapshot.forEach(doc => {
                        holidays.push(doc.data().date);
                    });
                    renderHolidays();
                })
                .catch(error => {
                    console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î:", error);
                });

            // ‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô
            db.collection('promotions').get()
                .then(snapshot => {
                    promotions = [];
                    snapshot.forEach(doc => {
                        promotions.push({ id: doc.id, ...doc.data() });
                    });
                    renderPromotions();
                })
                .catch(error => {
                    console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô:", error);
                });

            // ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏µ‡∏ß‡∏¥‡∏ß
            db.collection('reviews').get()
                .then(snapshot => {
                    reviews = [];
                    snapshot.forEach(doc => {
                        reviews.push({ id: doc.id, ...doc.data() });
                    });
                    renderReviews();
                })
                .catch(error => {
                    console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏µ‡∏ß‡∏¥‡∏ß:", error);
                });

            // ‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
            db.collection('bookings').get()
                .then(snapshot => {
                    bookings = [];
                    snapshot.forEach(doc => {
                        bookings.push({ id: doc.id, ...doc.data() });
                    });
                    if (isLoggedIn) renderBookings();
                })
                .catch(error => {
                    console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á:", error);
                });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å localStorage (fallback)
        function loadDataFromLocalStorage() {
            holidays = JSON.parse(localStorage.getItem('holidays')) || [];
            services = JSON.parse(localStorage.getItem('services')) || [
                { name: "‡∏™‡∏£‡∏∞ - ‡πÑ‡∏î‡∏£‡πå ‡∏ú‡∏°‡∏ï‡∏£‡∏á", price: "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà 60-150 ‡∏ö‡∏≤‡∏ó" },
                { name: "‡∏™‡∏£‡∏∞ - ‡πÑ‡∏î‡∏£‡πå ‡∏´‡∏ô‡∏µ‡∏ö", price: "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà 80-150 ‡∏ö‡∏≤‡∏ó" },
                { name: "‡∏™‡∏£‡∏∞‡∏ú‡∏° - ‡πÄ‡∏î‡πá‡∏Å‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô", price: "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà 20-80 ‡∏ö‡∏≤‡∏ó" },
                { name: "‡∏™‡∏õ‡∏≤‡∏ô‡∏≤‡πÇ‡∏ô", price: "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà 399 ‡∏ö‡∏≤‡∏ó" }
            ];
            promotions = JSON.parse(localStorage.getItem('promotions')) || [];
            reviews = JSON.parse(localStorage.getItem('reviews')) || [];
            bookings = JSON.parse(localStorage.getItem('bookings')) || [];
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á Firebase
        function saveToFirebase(collection, data, id = null) {
            if (!firebaseInitialized) {
                // ‡∏ñ‡πâ‡∏≤ Firebase ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏° ‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á localStorage ‡πÅ‡∏ó‡∏ô
                return saveToLocalStorage(collection, data);
            }

            if (id) {
                return db.collection(collection).doc(id).set(data);
            } else {
                return db.collection(collection).add(data);
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á localStorage (fallback)
        function saveToLocalStorage(collection, data) {
            let items = JSON.parse(localStorage.getItem(collection)) || [];
            items.push(data);
            localStorage.setItem(collection, JSON.stringify(items));
            return Promise.resolve();
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Firebase
        function deleteFromFirebase(collection, id) {
            if (!firebaseInitialized) {
                // ‡∏ñ‡πâ‡∏≤ Firebase ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏° ‡πÉ‡∏´‡πâ‡∏•‡∏ö‡∏à‡∏≤‡∏Å localStorage ‡πÅ‡∏ó‡∏ô
                return deleteFromLocalStorage(collection, id);
            }

            return db.collection(collection).doc(id).delete();
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡∏à‡∏≤‡∏Å localStorage (fallback)
        function deleteFromLocalStorage(collection, index) {
            let items = JSON.parse(localStorage.getItem(collection)) || [];
            items.splice(index, 1);
            localStorage.setItem(collection, JSON.stringify(items));
            return Promise.resolve();
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á floating icons
        function createFloatingIcons() {
            const icons = ['üíá', 'üíÖ', 'üíñ', '‚ú®', 'üåü', 'üéÄ', 'üí´', 'üå∏'];
            const container = document.getElementById('floatingIcons');
            
            for (let i = 0; i < 15; i++) {
                const icon = document.createElement('div');
                icon.className = 'floating-icon';
                icon.textContent = icons[Math.floor(Math.random() * icons.length)];
                icon.style.left = Math.random() * 100 + 'vw';
                icon.style.top = Math.random() * 100 + 'vh';
                icon.style.animationDelay = Math.random() * 20 + 's';
                icon.style.fontSize = (Math.random() * 20 + 16) + 'px';
                icon.style.color = `hsl(${Math.random() * 360}, 70%, 60%)`;
                container.appendChild(icon);
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á confetti
        function createConfetti() {
            const colors = ['#d291bc', '#4a154b', '#ffdfd3', '#06C755', '#ffc107'];
            const container = document.getElementById('confettiContainer');
            
            for (let i = 0; i < 150; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                container.appendChild(confetti);
                
                const animation = confetti.animate([
                    { transform: `translateY(0) rotate(0deg)`, opacity: 1 },
                    { transform: `translateY(${window.innerHeight}px) rotate(${Math.random() * 360}deg)`, opacity: 0 }
                ], {
                    duration: Math.random() * 3000 + 2000,
                    easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)'
                });
                
                animation.onfinish = () => confetti.remove();
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏î‡πà‡∏ß‡∏ô
        function quickLogin() {
            const password = prompt("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô");
            if (password === "muksalon157") {
                isLoggedIn = true;
                document.body.classList.add('logged-in');
                localStorage.setItem('isLoggedIn', 'true');
                showNotification('‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô', 'success');
                showPage('manage');
            } else {
                showNotification('‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', 'error');
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô
        function loginWithLine() {
            const password = prompt("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô");
            
            if (password === "muksalon157") {
                isLoggedIn = true;
                document.body.classList.add('logged-in');
                localStorage.setItem('isLoggedIn', 'true');
                showNotification('‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô', 'success');
                showPage('manage');
            } else {
                showNotification('‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', 'error');
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏≠‡∏≤‡∏ó‡πå
        function logout() {
            isLoggedIn = false;
            document.body.classList.remove('logged-in');
            localStorage.setItem('isLoggedIn', 'false');
            showNotification('‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏≠‡∏≤‡∏ó‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢', 'success');
            showPage('booking');
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤
        function showPage(page) {
            document.querySelectorAll(".page").forEach(p => p.classList.remove("activePage"));
            document.getElementById(page).classList.add("activePage");
            document.querySelectorAll("nav button").forEach(b => b.classList.remove("active"));
            document.querySelectorAll(".mobile-nav button").forEach(b => b.classList.remove("active"));

            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà active
            const navButtons = document.querySelectorAll("nav button, .mobile-nav button");
            for (let btn of navButtons) {
                if (btn.textContent === "‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å" && page === "home") btn.classList.add("active");
                if (btn.textContent === "‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß" && page === "booking") btn.classList.add("active");
                if (btn.textContent === "‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô" && page === "promo") btn.classList.add("active");
                if (btn.textContent === "‡∏£‡∏µ‡∏ß‡∏¥‡∏ß" && page === "reviews") btn.classList.add("active");
            }

            if (page === "booking") {
                resetBookingForm();
                renderServicesForBooking();
            }
            if (page === "home") {
                renderHolidays();
                renderServices();
            }
            if (page === "promo") renderPromotions();
            if (page === "reviews") renderReviews();
            if (page === "manage") renderBookings();
            
            // ‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤
            if (window.innerWidth <= 767) {
                toggleMobileMenu();
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏à‡∏≠‡∏á
        function resetBookingForm() {
            booking = {};
            bookingLocked = false;
            document.getElementById("name").value = "";
            document.getElementById("phone").value = "";
            document.getElementById("date").value = "";
            document.getElementById("timeSlots").innerHTML = "";
            
            // ‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
            document.querySelectorAll('input[name="service"]:checked').forEach(checkbox => {
                checkbox.checked = false;
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        function renderServicesForBooking() {
            const serviceSelection = document.getElementById("serviceSelection");
            serviceSelection.innerHTML = "";
            
            if (services.length === 0) {
                serviceSelection.innerHTML = "<p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£...</p>";
                return;
            }
            
            services.forEach((service, index) => {
                const serviceDiv = document.createElement("div");
                serviceDiv.className = "service-option";
                serviceDiv.innerHTML = `
                    <input type="checkbox" id="service-${index}" name="service" value="${service.name} - ${service.price}">
                    <label for="service-${index}">${service.name} - ${service.price}</label>
                `;
                serviceSelection.appendChild(serviceDiv);
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        async function submitBooking() {
            // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
            booking.name = document.getElementById("name").value.trim();
            booking.phone = document.getElementById("phone").value.trim();
            booking.date = document.getElementById("date").value;
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            if (!booking.name || !booking.phone) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå', 'error');
                return;
            }
            
            if (!booking.date) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà', 'error');
                return;
            }
            
            if (!booking.time) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤', 'error');
                return;
            }
            
            // ‡πÄ‡∏Å‡πá‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
            booking.services = [];
            document.querySelectorAll('input[name="service"]:checked').forEach(checkbox => {
                booking.services.push(checkbox.value);
            });
            
            if (booking.services.length === 0) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£', 'error');
                return;
            }
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            const hasConflict = await checkBookingConflict(booking.date, booking.time);
            if (hasConflict) {
                showNotification('‚è∞ ‡∏°‡∏µ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏≠‡∏µ‡∏Å‡∏ó‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏à‡∏≠‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏∑‡πà‡∏ô', 'warning');
                return;
            }
            
            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
            const newBooking = {
                name: booking.name,
                phone: booking.phone,
                date: booking.date,
                time: booking.time,
                services: booking.services,
                timestamp: new Date().toISOString(),
                status: "confirmed"
            };
            
            try {
                await saveToFirebase('bookings', newBooking);
                bookings.push(newBooking);
                
                // ‡∏™‡∏£‡πâ‡∏≤‡∏á confetti
                createConfetti();
                
                showNotification('‚úÖ ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');
                
                // ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
                sendEmailNotification("booking")
                    .then(success => {
                        if (success) {
                            console.log("‚úÖ ‡∏™‡πà‡∏á Email ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
                        } else {
                            console.warn("‚ùå ‡∏™‡πà‡∏á Email ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
                        }
                    });
                
                // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°
                resetBookingForm();
                
                // ‡πÅ‡∏™‡∏î‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
                setTimeout(() => {
                    showReviewModal();
                }, 1500);
            } catch (error) {
                console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á:", error);
                showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á', 'error');
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≠‡∏á‡∏ã‡πâ‡∏≥
        async function checkBookingConflict(date, time) {
            try {
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏ô Firebase
                if (firebaseInitialized) {
                    const snapshot = await db.collection('bookings')
                        .where('date', '==', date)
                        .where('time', '==', time)
                        .get();
                    
                    return !snapshot.empty;
                } else {
                    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏ô localStorage
                    return bookings.some(b => b.date === date && b.time === time);
                }
            } catch (error) {
                console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ã‡πâ‡∏≥:", error);
                return false;
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Email
        function saveEmailConfig() {
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏°
            emailConfig.publicKey = document.getElementById('emailJSPublicKey').value;
            emailConfig.serviceID = document.getElementById('emailJSServiceID').value;
            emailConfig.templateID = document.getElementById('emailJSTemplateID').value;
            emailConfig.adminEmail = document.getElementById('adminEmail').value;

            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á localStorage
            localStorage.setItem('emailConfig', JSON.stringify(emailConfig));
            
            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô EmailJS ‡πÉ‡∏´‡∏°‡πà
            if (emailConfig.publicKey && emailConfig.publicKey !== 'your_public_key_here') {
                emailjs.init(emailConfig.publicKey);
            }
            
            showNotification('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Email ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Email
        function testEmailConnection() {
            if (!emailConfig.publicKey || emailConfig.publicKey === 'your_public_key_here' ||
                !emailConfig.serviceID || emailConfig.serviceID === 'your_service_id_here' ||
                !emailConfig.templateID || emailConfig.templateID === 'your_template_id_here' ||
                !emailConfig.adminEmail || emailConfig.adminEmail === 'your_email@example.com') {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ EmailJS ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏î‡∏™‡∏≠‡∏ö', 'error');
                return;
            }

            const testResult = document.getElementById('testResult');
            testResult.style.display = 'block';
            testResult.className = 'test-result';
            testResult.innerHTML = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠...';

            sendTestEmail()
                .then((success) => {
                    if (success) {
                        testResult.classList.add('success');
                        testResult.innerHTML = '‚úÖ ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß';
                        showNotification('‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');
                    } else {
                        testResult.classList.add('error');
                        testResult.innerHTML = '‚ùå ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß: ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÑ‡∏î‡πâ';
                        showNotification('‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß', 'error');
                    }
                })
                .catch(error => {
                    testResult.classList.add('error');
                    testResult.innerHTML = '‚ùå ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß: ' + error;
                    showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö', 'error');
                });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö
        async function sendTestEmail() {
            const testHtml = `
                <div style="font-family: Arial, sans-serif; font-size: 14px; line-height: 1.6;">
                    <h2 style="color: #4a154b;">üîî ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏ß‡∏¢‡∏°‡∏∏‡∏Å‡∏ã‡∏≤‡∏•‡∏≠‡∏ô</h2>
                    <p>‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ EmailJS ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥</p>
                    <div style="background: #f9f0ff; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <p><strong>üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏î‡∏™‡∏≠‡∏ö:</strong> ${new Date().toLocaleString('th-TH')}</p>
                        <p><strong>‚úÖ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</strong> ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß</p>
                    </div>
                    <p>‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏•‡πâ‡∏ß</p>
                </div>
            `;

            return await sendEmailNotification(
                "üîî ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏ß‡∏¢‡∏°‡∏∏‡∏Å‡∏ã‡∏≤‡∏•‡∏≠‡∏ô",
                testHtml
            );
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏ó‡∏¢
        function formatDateThai(dateString) {
            const date = new Date(dateString);
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('th-TH', options);
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô Email
        async function sendEmailNotification(type = "booking") {
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
            if (!emailConfig.publicKey || emailConfig.publicKey === 'your_public_key_here' ||
                !emailConfig.serviceID || emailConfig.serviceID === 'your_service_id_here' ||
                !emailConfig.templateID || emailConfig.templateID === 'your_template_id_here' ||
                !emailConfig.adminEmail || emailConfig.adminEmail === 'your_email@example.com') {
                console.warn("‚ùå ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Email ‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô");
                return false;
            }

            try {
                // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô EmailJS
                emailjs.init(emailConfig.publicKey);

                // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå
                const templateParams = {
                    to_email: emailConfig.adminEmail,
                    name: booking.name || "‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",
                    phone: booking.phone || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏",
                    date: booking.date ? formatDateThai(booking.date) : new Date().toLocaleDateString('th-TH'),
                    time: booking.time || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏",
                    services: booking.services ? booking.services.map(s => `<li>${s}</li>`).join("") : "<li>‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö</li>",
                    created_at: new Date().toLocaleString('th-TH')
                };

                console.log("üìß ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:", type);

                const response = await emailjs.send(
                    emailConfig.serviceID, 
                    emailConfig.templateID,
                    templateParams
                );

                if (response.status === 200) {
                    console.log(`‚úÖ ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏• ${type} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!`);
                    return true;
                } else {
                    throw new Error(`EmailJS error: ${response.status} - ${response.text}`);
                }
            } catch (error) {
                console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•:", error);
                return false;
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        function renderBookings() {
            const container = document.getElementById("bookingList");
            container.innerHTML = "";

            if (bookings.length === 0) {
                container.innerHTML = "<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</p>";
                return;
            }

            const sortedBookings = [...bookings].reverse();
            sortedBookings.forEach((booking, index) => {
                const bookingDiv = document.createElement("div");
                bookingDiv.className = "booking-item";

                let servicesList = "";
                booking.services.forEach(service => {
                    servicesList += `<li>${service}</li>`;
                });

                bookingDiv.innerHTML = `
                    <div class="booking-content">
                        <p><strong>üë§ ‡∏ä‡∏∑‡πà‡∏≠:</strong> ${booking.name}</p>
                        <p><strong>üìû ‡πÇ‡∏ó‡∏£:</strong> ${booking.phone}</p>
                        <p><strong>üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</strong> ${booking.date}</p>
                        <p><strong>‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤:</strong> ${booking.time}</p>
                        <div class="services-section">
                            <p><strong>üíá ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£:</strong></p>
                            <ul class="services-list">${servicesList}</ul>
                        </div>
                        <p><strong>üïí ‡∏à‡∏≠‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠:</strong> ${new Date(booking.timestamp).toLocaleString('th-TH')}</p>
                    </div>
                `;

                if (isLoggedIn) {
                    const actionsDiv = document.createElement("div");
                    actionsDiv.className = "booking-actions";
                    
                    const deleteBtn = document.createElement("button");
                    deleteBtn.textContent = "‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á";
                    deleteBtn.className = "delete-btn";
                    deleteBtn.onclick = function () {
                        deleteBooking(booking.id || index);
                    };
                    
                    actionsDiv.appendChild(deleteBtn);
                    bookingDiv.appendChild(actionsDiv);
                }

                container.appendChild(bookingDiv);
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        async function deleteBooking(id) {
            if (!isLoggedIn) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', 'error');
                return;
            }

            if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ô‡∏µ‡πâ?")) {
                try {
                    // ‡∏•‡∏ö‡∏à‡∏≤‡∏Å Firebase ‡∏´‡∏£‡∏∑‡∏≠ localStorage
                    await deleteFromFirebase('bookings', id);
                    
                    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÉ‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥
                    const index = bookings.findIndex(b => b.id === id);
                    if (index !== -1) {
                        bookings.splice(index, 1);
                    } else {
                        // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ id (‡πÉ‡∏ä‡πâ localStorage) ‡πÉ‡∏´‡πâ‡∏•‡∏ö‡∏ï‡∏≤‡∏° index
                        bookings.splice(id, 1);
                    }
                    
                    renderBookings();
                    showNotification('‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
                } catch (error) {
                    console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á:", error);
                    showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á', 'error');
                }
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
        async function addService() {
            if (!isLoggedIn) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£', 'error');
                return;
            }

            const name = document.getElementById("newServiceName").value;
            const price = document.getElementById("newServicePrice").value;
            
            if (!name || !price) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö', 'error');
                return;
            }

            const newService = { name, price };
            
            try {
                // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Firebase ‡∏´‡∏£‡∏∑‡∏≠ localStorage
                await saveToFirebase('services', newService);
                services.push(newService);
                renderServices();
                renderServicesForBooking(); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏î‡πâ‡∏ß‡∏¢
                document.getElementById("newServiceName").value = "";
                document.getElementById("newServicePrice").value = "";
                showNotification('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
            } catch (error) {
                console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£:", error);
                showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£', 'error');
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
        function renderServices() {
            const container = document.getElementById("servicesList");
            container.innerHTML = "";

            if (services.length === 0) {
                container.innerHTML = "<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</p>";
                return;
            }

            services.forEach((service, index) => {
                const serviceItem = document.createElement("li");
                serviceItem.className = "service-item";
                serviceItem.innerHTML = `
                    <div>
                        <strong>${service.name}</strong> - ${service.price}
                    </div>
                    ${isLoggedIn ? `<button class="delete-btn" onclick="deleteService('${service.id || index}')">‡∏•‡∏ö</button>` : ''}
                `;
                container.appendChild(serviceItem);
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
        async function deleteService(id) {
            if (!isLoggedIn) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', 'error');
                return;
            }

            if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ?")) {
                try {
                    // ‡∏•‡∏ö‡∏à‡∏≤‡∏Å Firebase ‡∏´‡∏£‡∏∑‡∏≠ localStorage
                    await deleteFromFirebase('services', id);
                    
                    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥
                    const index = services.findIndex(s => s.id === id);
                    if (index !== -1) {
                        services.splice(index, 1);
                    } else {
                        // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ id (‡πÉ‡∏ä‡πâ localStorage) ‡πÉ‡∏´‡πâ‡∏•‡∏ö‡∏ï‡∏≤‡∏° index
                        services.splice(id, 1);
                    }
                    
                    renderServices();
                    renderServicesForBooking(); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏î‡πâ‡∏ß‡∏¢
                    showNotification('‡∏•‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
                } catch (error) {
                    console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£:", error);
                    showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£', 'error');
                }
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î
        async function addHoliday() {
            if (!isLoggedIn) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î', 'error');
                return;
            }

            const date = document.getElementById("newHoliday").value;
            
            if (!date) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà', 'error');
                return;
            }

            if (holidays.includes(date)) {
                showNotification('‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß', 'error');
                return;
            }
            
            try {
                // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Firebase ‡∏´‡∏£‡∏∑‡∏≠ localStorage
                await saveToFirebase('holidays', { date });
                holidays.push(date);
                renderHolidays();
                document.getElementById("newHoliday").value = "";
                showNotification('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
            } catch (error) {
                console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î:", error);
                showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î', 'error');
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î
        function renderHolidays() {
            const container = document.getElementById("holidayList");
            container.innerHTML = "";

            if (holidays.length === 0) {
                container.innerHTML = "<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</p>";
                return;
            }

            holidays.forEach((date, index) => {
                const holidayItem = document.createElement("li");
                holidayItem.className = "holiday-item";
                holidayItem.innerHTML = `
                    <div>${new Date(date).toLocaleDateString('th-TH')}</div>
                    ${isLoggedIn ? `<button class="delete-btn" onclick="deleteHoliday('${date}')">‡∏•‡∏ö</button>` : ''}
                `;
                container.appendChild(holidayItem);
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î
        async function deleteHoliday(date) {
            if (!isLoggedIn) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', 'error');
                return;
            }

            if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏ô‡∏µ‡πâ?")) {
                try {
                    // ‡∏•‡∏ö‡∏à‡∏≤‡∏Å Firebase (‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ document ‡∏ó‡∏µ‡πà‡∏°‡∏µ field date ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö)
                    if (firebaseInitialized) {
                        const snapshot = await db.collection('holidays')
                            .where('date', '==', date)
                            .get();
                        
                        snapshot.forEach(doc => {
                            doc.ref.delete();
                        });
                    } else {
                        // ‡∏•‡∏ö‡∏à‡∏≤‡∏Å localStorage
                        await deleteFromLocalStorage('holidays', holidays.indexOf(date));
                    }
                    
                    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡πÉ‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥
                    const index = holidays.indexOf(date);
                    if (index !== -1) {
                        holidays.splice(index, 1);
                    }
                    
                    renderHolidays();
                    showNotification('‡∏•‡∏ö‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
                } catch (error) {
                    console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î:", error);
                    showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î', 'error');
                }
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô
        async function addPromo() {
            if (!isLoggedIn) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô', 'error');
                return;
            }

            const title = document.getElementById("promoTitle").value;
            const description = document.getElementById("promoDescription").value;
            const imageFile = document.getElementById("promoImageFile").files[0];
            
            if (!title || !description) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö', 'error');
                return;
            }

            let imageUrl = "";
            
            // ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
            if (imageFile) {
                // ‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô base64 ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ Firebase Storage
                // ‡πÉ‡∏ô‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ Firebase Storage ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
                imageUrl = await readFileAsDataURL(imageFile);
            }

            const newPromo = { 
                title, 
                description, 
                imageUrl,
                timestamp: new Date().toISOString()
            };
            
            try {
                // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Firebase ‡∏´‡∏£‡∏∑‡∏≠ localStorage
                await saveToFirebase('promotions', newPromo);
                promotions.push(newPromo);
                renderPromotions();
                document.getElementById("promoTitle").value = "";
                document.getElementById("promoDescription").value = "";
                document.getElementById("promoImageFile").value = "";
                showNotification('‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
            } catch (error) {
                console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô:", error);
                showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô', 'error');
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏õ‡πá‡∏ô Data URL
        function readFileAsDataURL(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô
        function renderPromotions() {
            const container = document.getElementById("promoContent");
            container.innerHTML = "";

            if (promotions.length === 0) {
                container.innerHTML = "<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô</p>";
                return;
            }

            const sortedPromos = [...promotions].reverse();
            sortedPromos.forEach((promo, index) => {
                const promoItem = document.createElement("div");
                promoItem.className = "promo-item";
                
                let imageHtml = "";
                if (promo.imageUrl) {
                    imageHtml = `<img src="${promo.imageUrl}" alt="${promo.title}" class="promo-image">`;
                }
                
                promoItem.innerHTML = `
                    ${imageHtml}
                    <div class="promo-title">${promo.title}</div>
                    <div class="promo-description">${promo.description}</div>
                    ${isLoggedIn ? `<button class="delete-btn" onclick="deletePromo('${promo.id || index}')">‡∏•‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô</button>` : ''}
                `;
                container.appendChild(promoItem);
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô
        async function deletePromo(id) {
            if (!isLoggedIn) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', 'error');
                return;
            }

            if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ?")) {
                try {
                    // ‡∏•‡∏ö‡∏à‡∏≤‡∏Å Firebase ‡∏´‡∏£‡∏∑‡∏≠ localStorage
                    await deleteFromFirebase('promotions', id);
                    
                    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô‡πÉ‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥
                    const index = promotions.findIndex(p => p.id === id);
                    if (index !== -1) {
                        promotions.splice(index, 1);
                    } else {
                        // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ id (‡πÉ‡∏ä‡πâ localStorage) ‡πÉ‡∏´‡πâ‡∏•‡∏ö‡∏ï‡∏≤‡∏° index
                        promotions.splice(id, 1);
                    }
                    
                    renderPromotions();
                    showNotification('‡∏•‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
                } catch (error) {
                    console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô:", error);
                    showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô', 'error');
                }
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß
        function renderReviews() {
            const container = document.getElementById("reviewsList");
            container.innerHTML = "";

            if (reviews.length === 0) {
                container.innerHTML = "<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</p>";
                return;
            }

            const sortedReviews = [...reviews].reverse();
            sortedReviews.forEach(review => {
                const reviewItem = document.createElement("div");
                reviewItem.className = "review-item"; // ‡πÉ‡∏ä‡πâ class ‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö styling
                
                let stars = "";
                for (let i = 1; i <= 5; i++) {
                    stars += i <= review.rating ? "‚òÖ" : "‚òÜ";
                }
                
                // ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô
                reviewItem.innerHTML = `
                    <div class="review-header">
                        <div class="reviewer-name">${review.name || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠"}</div>
                        <div class="review-date">${new Date(review.timestamp).toLocaleDateString('th-TH')}</div>
                    </div>
                    <div class="stars">${stars}</div>
                    <p>${review.comment || "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°"}</p>
                    ${isLoggedIn ? `
                        <div class="review-actions">
                            <button class="delete-btn" onclick="deleteReview('${review.id}')">
                                <i class="fas fa-trash"></i> ‡∏•‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß
                            </button>
                        </div>
                    ` : ''}
                `;
                container.appendChild(reviewItem);
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡∏ß‡∏¥‡∏ß (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô)
        function renderReviewsManagement() {
            const container = document.getElementById("reviewsManagementList");
            if (!container) return;
            
            container.innerHTML = "";

            if (reviews.length === 0) {
                container.innerHTML = "<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</p>";
                return;
            }

            const sortedReviews = [...reviews].reverse();
            sortedReviews.forEach(review => {
                const reviewItem = document.createElement("div");
                reviewItem.className = "review-item";
                
                let stars = "";
                for (let i = 1; i <= 5; i++) {
                    stars += i <= review.rating ? "‚òÖ" : "‚òÜ";
                }
                
                reviewItem.innerHTML = `
                    <div class="review-header">
                        <div class="reviewer-name">${review.name || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠"}</div>
                        <div class="review-date">${new Date(review.timestamp).toLocaleDateString('th-TH')}</div>
                    </div>
                    <div class="stars">${stars}</div>
                    <p>${review.comment || "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°"}</p>
                    <div class="review-actions">
                        <button class="delete-btn" onclick="deleteReview('${review.id}')">
                            <i class="fas fa-trash"></i> ‡∏•‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß
                        </button>
                    </div>
                `;
                container.appendChild(reviewItem);
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß
        async function deleteReview(id) {
            if (!isLoggedIn) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß', 'error');
                return;
            }

            if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏ô‡∏µ‡πâ?")) {
                try {
                    await deleteFromFirebase('reviews', id);
                    
                    // ‡∏•‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏£‡∏¢‡πå
                    const index = reviews.findIndex(r => r.id === id);
                    if (index !== -1) {
                        reviews.splice(index, 1);
                    }
                    
                    // ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
                    renderReviews();
                    if (isLoggedIn) {
                        renderReviewsManagement();
                    }
                    
                    showNotification('‡∏•‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
                } catch (error) {
                    console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß:", error);
                    showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß', 'error');
                }
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á modal ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß
        function showReviewModal() {
            document.getElementById("reviewModal").style.display = "flex";
            currentRating = 0;
            document.getElementById("reviewerName").value = "";
            document.getElementById("reviewComment").value = "";
            document.getElementById("thanksMsg").innerHTML = "";
            
            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏î‡∏≤‡∏ß
            const stars = document.querySelectorAll("#modalStars span");
            stars.forEach(star => {
                star.classList.remove("active");
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏ô modal
        function setModalRating(rating) {
            currentRating = rating;
            const stars = document.querySelectorAll("#modalStars span");
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add("active");
                } else {
                    star.classList.remove("active");
                }
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å renderReviewsManagement() ‡∏î‡πâ‡∏ß‡∏¢
        async function submitReview() {
            const name = document.getElementById("reviewerName").value.trim() || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠";
            const comment = document.getElementById("reviewComment").value.trim() || "";
            
            if (currentRating === 0) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏î‡∏≤‡∏ß', 'error');
                return;
            }

            const newReview = {
                name,
                rating: currentRating,
                comment,
                timestamp: new Date().toISOString()
            };
            
            try {
                await saveToFirebase('reviews', newReview);
                reviews.push(newReview);
                
                // ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô
                renderReviews();
                if (isLoggedIn) {
                    renderReviewsManagement();
                }
                
                document.getElementById("thanksMsg").innerHTML = "‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏Ñ‡πà‡∏∞ üíñ";
                setTimeout(() => {
                    document.getElementById("reviewModal").style.display = "none";
                    showPage("reviews");
                }, 2000);
                
                showNotification('‡∏™‡πà‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
            } catch (error) {
                console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß:", error);
                showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß', 'error');
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤ - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å renderReviewsManagement() ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤ manage
        function showPage(page) {
            document.querySelectorAll(".page").forEach(p => p.classList.remove("activePage"));
            document.getElementById(page).classList.add("activePage");
            document.querySelectorAll("nav button, .mobile-nav button").forEach(b => b.classList.remove("active"));

            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà active
            const navButtons = document.querySelectorAll("nav button, .mobile-nav button");
            for (let btn of navButtons) {
                if (btn.textContent === "‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å" && page === "home") btn.classList.add("active");
                if (btn.textContent === "‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß" && page === "booking") btn.classList.add("active");
                if (btn.textContent === "‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô" && page === "promo") btn.classList.add("active");
                if (btn.textContent === "‡∏£‡∏µ‡∏ß‡∏¥‡∏ß" && page === "reviews") btn.classList.add("active");
            }

            if (page === "booking") {
                resetBookingForm();
                renderServicesForBooking();
            }
            if (page === "home") {
                renderHolidays();
                renderServices();
            }
            if (page === "promo") renderPromotions();
            if (page === "reviews") renderReviews(); // ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏õ‡∏Å‡∏ï‡∏¥
            if (page === "manage") {
                renderBookings();
                renderReviewsManagement(); // ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡∏ß‡∏¥‡∏ß
            }
            
            if (window.innerWidth <= 767) {
                toggleMobileMenu();
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
        function showNotification(message, type) {
            // ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏¥‡πâ‡∏á‡∏Å‡πà‡∏≠‡∏ô
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(notification => {
                notification.remove();
            });
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <span>${message}</span>
                <button onclick="this.parentElement.remove()">√ó</button>
            `;
            
            document.body.appendChild(notification);
            
            // ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á particles (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡πÄ‡∏•‡πà‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á)
        function createParticles() {
            // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏π‡∏Å‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÑ‡∏î‡πâ
        }
    </script>
</body>
</html>
