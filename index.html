<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏ß‡∏¢‡∏°‡∏∏‡∏Å‡∏ã‡∏≤‡∏•‡∏≠‡∏ô</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Kanit', 'Sukhumvit Set', 'Sarabun', sans-serif;
        }
        
        body {
            background-color: #f9f0ff;
            color: #4a154b;
            line-height: 1.6;
            padding: 0;
            margin: 0;
            position: relative;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* ‡∏õ‡∏∏‡πà‡∏°‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏î‡πà‡∏ß‡∏ô */
        .quick-login {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .quick-login-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #4a154b;
            color: white;
            border: none;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s;
            z-index: 1001;
        }
        
        .quick-login-btn:hover {
            transform: scale(1.1);
            background: #6a1b6d;
        }
        
        /* Header - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
        header {
            background: linear-gradient(135deg, #d291bc 0%, #ffdfd3 100%);
            padding: 15px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: relative;
            z-index: 10;
        }
        
        .header-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            position: relative;
            padding: 0 15px;
        }
        
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 10px;
        }
        
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #4a154b;
            cursor: pointer;
            z-index: 100;
            padding: 5px;
        }
        
        .cute-float {
            animation: float 3s ease-in-out infinite;
            color: #4a154b;
            font-size: 1.8rem;
            text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.7);
            margin: 0;
            flex: 1;
            text-align: center;
        }
        
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0px); }
        }
        
        /* ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡∏°‡πà */
        .tagline-container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            margin-top: 5px;
            padding: 0 10px;
        }
        
        .tagline {
            color: white;
            font-size: 1rem;
            line-height: 1.3;
            padding: 8px 15px;
            background-color: rgba(74, 21, 75, 0.7);
            border-radius: 20px;
            text-align: center;
            max-width: 90%;
            /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ß‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô */
            margin: 0 auto;
            display: inline-block;
        }
        
        .admin-panel {
            text-align: center;
            margin-top: 10px;
            width: 100%;
        }
        
        .login-btn {
            background: #06C755;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .login-btn:hover {
            background: #05a848;
            transform: translateY(-2px);
        }
        
        .line-icon {
            background: white;
            color: #06C755;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.8rem;
        }
        
        .admin-only {
            display: none;
            margin-top: 10px;
        }
        
        .logged-in .admin-only {
            display: block;
        }
        
        .logout-btn {
            background: #ff4757;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 20px;
            cursor: pointer;
            margin-left: 8px;
            font-size: 0.8rem;
        }
        
        /* Navigation - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
        nav {
            display: flex;
            justify-content: center;
            background: white;
            padding: 10px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .nav-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            width: 100%;
            max-width: 800px;
        }
        
        nav button {
            background: none;
            border: none;
            padding: 8px 15px;
            margin: 0 5px;
            cursor: pointer;
            font-size: 0.9rem;
            color: #4a154b;
            border-radius: 20px;
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        nav button:hover, nav button.active {
            background: #4a154b;
            color: white;
        }
        
        /* Mobile Navigation */
        .mobile-nav {
            display: none;
            position: fixed;
            top: 0;
            right: -280px;
            height: 100vh;
            width: 280px;
            background: white;
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
            z-index: 100;
            transition: right 0.3s ease;
            padding-top: 70px;
            overflow-y: auto;
        }
        
        .mobile-nav.active {
            right: 0;
        }
        
        .mobile-nav button {
            display: block;
            width: 100%;
            padding: 15px 20px;
            text-align: left;
            border: none;
            background: none;
            border-bottom: 1px solid #f0f0f0;
            font-size: 1rem;
            color: #4a154b;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .mobile-nav button:hover, .mobile-nav button.active {
            background: #f9f0ff;
            color: #4a154b;
        }
        
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 99;
        }
        
        .overlay.active {
            display: block;
        }
        /* Mobile Menu Button - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏ß‡∏≤‡∏™‡∏∏‡∏î */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.8rem;
            color: white;
            cursor: pointer;
            position: absolute;
            top: 50%;
            right: 20px;
            transform: translateY(-50%);
            z-index: 100;
            padding: 5px;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        .mobile-menu-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 99;
        }
        
        .overlay.active {
            display: block;
        }
        
        /* Pages */
        .page {
            display: none;
            padding: 20px 0;
            animation: fadeIn 0.5s;
        }
        
        .activePage {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .box {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 15px auto;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            max-width: 800px;
            position: relative;
            z-index: 5;
        }
        
        .box h2 {
            color: #4a154b;
            margin-bottom: 15px;
            text-align: center;
            border-bottom: 2px solid #ffdfd3;
            padding-bottom: 10px;
            font-size: 1.5rem;
        }
        
        .box h3 {
            color: #6a1b6d;
            margin: 10px 0;
            font-size: 1.2rem;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        button {
            background: #d291bc;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin: 5px;
            transition: all 0.3s;
            width: 100%;
        }
        
        button:hover {
            background: #b76e94;
            transform: translateY(-2px);
        }
        
        .delete-btn {
            background: #ff4757;
        }
        
        .delete-btn:hover {
            background: #ff2e43;
        }
        
        .service-item, .holiday-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .message {
            text-align: center;
            font-size: 1.1rem;
            color: #4a154b;
            padding: 15px;
        }
        
        /* Review Stars */
        .stars {
            color: #ffc107;
            font-size: 1.5rem;
            margin: 10px 0;
            text-align: center;
        }
        
        .stars span {
            cursor: pointer;
            transition: all 0.2s;
            margin: 0 2px;
        }
        
        .stars span:hover, .stars span.active {
            transform: scale(1.2);
            text-shadow: 0 0 5px rgba(255, 193, 7, 0.8);
        }
        
        /* Review Modal */
        .review-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 15px;
        }
        
        .review-modal-content {
            background: white;
            padding: 20px;
            border-radius: 15px;
            width: 100%;
            max-width: 500px;
            text-align: center;
            position: relative;
            z-index: 1001;
        }
        
        /* Gmail Configuration */
        .gmail-config {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .instructions {
            background: white;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 12px;
        }
        
        .instructions ol {
            text-align: left;
            padding-left: 20px;
            margin: 8px 0;
        }
        
        .instructions li {
            margin-bottom: 6px;
            font-size: 0.9rem;
        }
        
        .config-section {
            margin: 12px 0;
            text-align: left;
        }
        
        .config-section label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .test-result {
            margin-top: 12px;
            padding: 8px;
            border-radius: 5px;
            display: none;
            font-size: 0.9rem;
        }
        
        .test-result.success {
            background: #d4edda;
            color: #155724;
            display: block;
        }
        
        .test-result.error {
            background: #f8d7da;
            color: #721c24;
            display: block;
        }
        
        /* Booking Items */
        .booking-item {
            background: linear-gradient(135deg, #ffffff, #f8f9fa);
            padding: 15px;
            border-radius: 12px;
            margin: 12px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-left: 4px solid #d291bc;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .booking-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.15);
        }

        .booking-content {
            margin-bottom: 12px;
        }

        .booking-content p {
            margin: 6px 0;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .booking-content strong {
            color: #4a154b;
            display: inline-block;
            min-width: 70px;
        }

        .services-section {
            margin: 8px 0;
        }

        .services-list {
            background: #f9f0ff;
            padding: 8px 12px;
            border-radius: 6px;
            margin: 4px 0;
            list-style-type: none;
        }

        .services-list li {
            padding: 4px 0;
            border-bottom: 1px dashed #e0e0e0;
            position: relative;
            padding-left: 18px;
            font-size: 0.85rem;
        }

        .services-list li:before {
            content: "‚Ä¢";
            color: #d291bc;
            position: absolute;
            left: 0;
            font-size: 16px;
        }

        .services-list li:last-child {
            border-bottom: none;
        }

        .booking-actions {
            text-align: center;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #f0f0f0;
        }

        .delete-btn {
            background: linear-gradient(135deg, #ff4757, #ff2e43);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            width: auto;
        }

        .delete-btn:hover {
            background: linear-gradient(135deg, #ff2e43, #ff1e36);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(255, 71, 87, 0.3);
        }

        /* ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô */
        .notification {
            position: fixed;
            top: 15px;
            right: 15px;
            padding: 12px 16px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            min-width: 250px;
            max-width: 90%;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            animation: slideInRight 0.3s ease;
        }

        .notification.success {
            background: linear-gradient(135deg, #06C755, #05a848);
        }

        .notification.error {
            background: linear-gradient(135deg, #ff4757, #ff2e43);
        }

        .notification button {
            background: none;
            border: none;
            color: white;
            font-size: 16px;
            cursor: pointer;
            padding: 0;
            margin: 0;
            width: 18px;
            height: 18px;
            width: auto;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 8px;
            height: 8px;
            background: #f00;
            top: -10px;
            z-index: 9999;
            pointer-events: none;
        }

        /* Floating Icons */
        .floating-icon {
            position: fixed;
            font-size: 20px;
            z-index: -1;
            opacity: 0.7;
            animation: floatAround 20s infinite linear;
        }

        @keyframes floatAround {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }
            25% {
                transform: translate(100px, 100px) rotate(90deg);
            }
            50% {
                transform: translate(200px, 50px) rotate(180deg);
            }
            75% {
                transform: translate(100px, 150px) rotate(270deg);
            }
            100% {
                transform: translate(0, 0) rotate(360deg);
            }
        }

        /* Background Effects */
        .bg-effect {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            pointer-events: none;
        }

        .rotating-bg {
            background: linear-gradient(45deg, #ffdfd3, #d291bc, #f9f0ff, #ffdfd3);
            background-size: 400% 400%;
            animation: gradientRotate 15s ease infinite;
        }

        @keyframes gradientRotate {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        /* Progress Bar */
        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            position: relative;
        }
        
        .progress-step {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            z-index: 2;
            font-size: 0.8rem;
        }
        
        .progress-step.active {
            background: #d291bc;
        }
        
        .progress-step.completed {
            background: #4a154b;
        }
        
        .progress-bar::before {
            content: "";
            position: absolute;
            top: 12px;
            left: 0;
            right: 0;
            height: 2px;
            background: #ddd;
            z-index: 1;
        }
        
        .step-label {
            position: absolute;
            top: 30px;
            font-size: 0.7rem;
            text-align: center;
            width: 80px;
            left: -30px;
            display: none;
        }

        /* Security Badge */
        .security-badge {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 8px 12px;
            border-radius: 16px;
            font-size: 0.7rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* Service Selection */
        .service-selection {
            margin: 12px 0;
        }
        
        .service-option {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin: 6px 0;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .service-option:hover {
            background: #f9f0ff;
            border-color: #d291bc;
        }
        
        .service-option input {
            margin-right: 8px;
            width: auto;
        }
        
        .service-option label {
            flex: 1;
            cursor: pointer;
            font-size: 0.9rem;
        }

        /* Button Groups */
        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
        }
        
        .button-group button {
            flex: 1;
            min-width: 120px;
        }

        /* ‡πÄ‡∏°‡∏ô‡∏π‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏ß‡∏≤‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• */
        .mobile-nav {
            display: none;
            position: fixed;
            top: 0;
            right: -300px; /* ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ô‡∏≠‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤ */
            width: 280px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
            z-index: 100;
            transition: right 0.3s ease;
            padding-top: 70px;
        }
        
        .mobile-nav.active {
            right: 0; /* ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ */
        }
        
        .mobile-nav button {
            display: block;
            width: 100%;
            padding: 15px 20px;
            text-align: left;
            border: none;
            background: none;
            border-bottom: 1px solid #f0f0f0;
            font-size: 1rem;
            color: #4a154b;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .mobile-nav button:hover, .mobile-nav button.active {
            background: #4a154b;
            color: white;
        }
        
        .mobile-nav-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #4a154b;
            cursor: pointer;
        }

        /* Responsive Design */
        @media (min-width: 768px) {
            .container {
                padding: 0 20px;
            }
            
            header {
                padding: 20px 0;
            }
            
            .cute-float {
                font-size: 2.2rem;
            }
            
            nav button {
                padding: 10px 20px;
                margin: 0 10px;
                font-size: 1rem;
            }
            
            .page {
                padding: 30px 0;
            }
            
            .box {
                padding: 25px;
                margin: 20px auto;
            }
            
            .box h2 {
                font-size: 1.8rem;
                margin-bottom: 20px;
            }
            
            button {
                width: auto;
            }
            
            .button-group {
                flex-wrap: nowrap;
            }
            
            .step-label {
                display: block;
            }
            
            .progress-step {
                width: 30px;
                height: 30px;
                font-size: 1rem;
            }
            
            .progress-bar::before {
                top: 15px;
            }
            
            /* ‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏ö‡∏ô‡πÄ‡∏î‡∏™‡∏Å‡πå‡∏ó‡πá‡∏≠‡∏õ */
            .mobile-menu-btn, .mobile-nav {
                display: none;
            }
        }

        @media (max-width: 767px) {
            /* ‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏õ‡∏Å‡∏ï‡∏¥‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
            nav {
                display: none;
            }
            
            /* ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
            .mobile-menu-btn {
                display: block;
            }
            
            /* ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏ô‡∏π‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
            .mobile-nav {
                display: block;
            }
            
            .container {
                padding: 0 10px;
            }
            
            .cute-float {
                font-size: 1.5rem;
                padding-right: 50px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π */
            }
            
            .login-btn {
                padding: 8px 15px;
                font-size: 0.8rem;
            }
            
            .box {
                padding: 15px;
                margin: 10px auto;
            }
            
            .booking-item {
                padding: 12px;
            }
            
            .notification {
                min-width: calc(100% - 30px);
                right: 15px;
                left: 15px;
            }
            
            .security-badge {
                bottom: 70px;
                left: 10px;
                right: 10px;
                text-align: center;
            }
            
            /* ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á header content ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° */
            .header-content {
                padding: 0 50px 0 0; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤ */
            }
        }

        @media (max-width: 480px) {
            .cute-float {
                font-size: 1.3rem;
                padding-right: 45px;
            }
            
            .box {
                padding: 12px;
                margin: 8px auto;
            }
            
            .mobile-nav {
                width: 250px;
            }
            
            .mobile-menu-btn {
                right: 15px;
                font-size: 1.6rem;
            }
        }
    </style>
</head>
<body>
    <!-- Background Effects -->
    <div class="bg-effect rotating-bg"></div>
    
    <!-- Floating Icons -->
    <div id="floatingIcons"></div>
    
    <!-- Confetti Container -->
    <div id="confettiContainer"></div>
    
    <!-- Security Badge -->
    <div class="security-badge">
        <i class="fas fa-shield-alt" style="color: #4a154b;"></i>
        <span>‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏±‡∏ö</span>
    </div>
    
    <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏î‡πà‡∏ß‡∏ô -->
    <div class="quick-login">
        <button class="quick-login-btn" onclick="quickLogin()">üîë</button>
    </div>

    <header>
        <div class="container">
            <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ - ‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏ß‡∏≤‡∏™‡∏∏‡∏î -->
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">‚ò∞</button>
            <div class="header-content">
                <h1 class="cute-float">‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏ß‡∏¢‡∏°‡∏∏‡∏Å‡∏ã‡∏≤‡∏•‡∏≠‡∏ô üíñ</h1>
                <p style="color: white; font-size: 1rem; margin-top: 5px;">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡πÅ‡∏•‡∏∞ professionalism</p>
            </div>
            <div class="admin-panel">
                <button id="loginBtn" class="login-btn" onclick="loginWithLine()">
                    <span class="line-icon">L</span> ‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô
                </button>
                <div id="adminMenu" class="admin-only">
                    <button onclick="showPage('manage')">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≤‡∏ô</button>
                    <button class="logout-btn" onclick="logout()">‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏≠‡∏≤‡∏ó‡πå</button>
                </div>
            </div>
        </div>
    </header>

    <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏õ‡∏Å‡∏ï‡∏¥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡∏™‡∏Å‡πå‡∏ó‡πá‡∏≠‡∏õ -->
    <nav id="mainNav">
        <button class="active" onclick="showPage('home')">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
        <button onclick="showPage('booking')">‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß</button>
        <button onclick="showPage('promo')">‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô</button>
        <button onclick="showPage('reviews')">‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</button>
    </nav>

    <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà -->
    <div class="mobile-nav" id="mobileNav">
        <button class="mobile-nav-close" onclick="toggleMobileMenu()">√ó</button>
        <button class="active" onclick="showPage('home')">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
        <button onclick="showPage('booking')">‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß</button>
        <button onclick="showPage('promo')">‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô</button>
        <button onclick="showPage('reviews')">‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</button>
    </div>

    <div class="overlay" id="overlay" onclick="toggleMobileMenu()"></div>

    <div class="container">
        <!-- ‡∏´‡∏ô‡πâ‡∏≤ Home -->
        <div id="home" class="page activePage">
            <div class="box">
                <h2>‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏£‡πâ‡∏≤‡∏ô</h2>
                <ul id="servicesList" style="text-align:left; list-style-type: none; padding: 0;"></ul>
                <div class="admin-only">
                    <h3>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h3>
                    <input type="text" id="newServiceName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£">
                    <input type="text" id="newServicePrice" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤">
                    <button onclick="addService()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</button>
                </div>

                <h3>‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô</h3>
                <ul id="holidayList" style="color:red; text-align:left; list-style-type: none; padding: 0;"></ul>
                <div class="admin-only">
                    <input type="date" id="newHoliday">
                    <button onclick="addHoliday()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</button>
                </div>
            </div>
        </div>

        <!-- ‡∏´‡∏ô‡πâ‡∏≤ Booking -->
        <div id="booking" class="page">
            <div class="box">
                <div class="progress-bar">
                    <div class="progress-step active">1<span class="step-label">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</span></div>
                    <div class="progress-step">2<span class="step-label">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</span></div>
                    <div class="progress-step">3<span class="step-label">‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤</span></div>
                    <div class="progress-step">4<span class="step-label">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</span></div>
                </div>
            </div>

            <div class="box" id="formBox">
                <h2>‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ üë§</h2>
                <input type="text" id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
                <input type="tel" id="phone" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå">
                <div class="button-group">
                    <button onclick="goToServiceSelection()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
                </div>
            </div>

            <div class="box" id="serviceBox" style="display:none;">
                <h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ üíá‚Äç‚ôÄÔ∏è</h2>
                <div id="serviceSelection" class="service-selection"></div>
                <div class="button-group">
                    <button onclick="goToCalendar()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
                </div>
            </div>

            <div class="box" id="calendarBox" style="display:none;">
                <h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ üìÖ</h2>
                <input type="date" id="date">
                <select id="time"></select>
                <div class="button-group">
                    <button onclick="reviewBooking()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
                </div>
            </div>

            <div class="box" id="confirmBox" style="display:none;">
                <h2>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á ‚úÖ</h2>
                <div id="bookingInfo"></div>
                <div class="button-group">
                    <button onclick="lockBooking()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</button>
                    <button onclick="editBooking()">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                    <button onclick="cancelBooking()" class="delete-btn">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</button>
                </div>
            </div>
        </div>

        <!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô -->
        <div id="promo" class="page">
            <div class="box">
                <h2>‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô</h2>
                <div id="promoContent"></div>

                <div class="admin-only">
                    <h3>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô</h3>
                    <input type="text" id="promoTitle" placeholder="‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô">
                    <textarea id="promoDescription" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô" rows="3"></textarea>
                    <input type="file" id="promoImageFile" accept="image/*">
                    <button onclick="addPromo()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô</button>
                </div>
            </div>
        </div>

        <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏µ‡∏ß‡∏¥‡∏ß -->
        <div id="reviews" class="page">
            <div class="box">
                <h2>‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h2>
                <div id="reviewsList"></div>
            </div>
        </div>

        <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≤‡∏ô -->
        <div id="manage" class="page">
            <div class="box">
                <h2>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≤‡∏ô</h2>
                <div class="button-group">
                    <button onclick="showPage('home')">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</button>
                    <button onclick="showPage('promo')">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô</button>
                </div>

                <div class="box">
                    <h2>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•</h2>
                    <div class="gmail-config">
                        <div class="config-section">
                            <label for="emailJSPublicKey">EmailJS Public Key:</label>
                            <input type="text" id="emailJSPublicKey" placeholder="‡πÉ‡∏™‡πà Public Key">
                        </div>

                        <div class="config-section">
                            <label for="emailJSServiceID">EmailJS Service ID:</label>
                            <input type="text" id="emailJSServiceID" placeholder="‡πÉ‡∏™‡πà Service ID">
                        </div>

                        <div class="config-section">
                            <label for="emailJSTemplateID">EmailJS Template ID:</label>
                            <input type="text" id="emailJSTemplateID" placeholder="‡πÉ‡∏™‡πà Template ID">
                        </div>

                        <div class="config-section">
                            <label for="adminEmail">‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô:</label>
                            <input type="email" id="adminEmail" placeholder="‡πÉ‡∏™‡πà‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô">
                        </div>

                        <div class="button-group">
                            <button onclick="saveEmailConfig()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</button>
                            <button onclick="testEmailConnection()">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠</button>
                        </div>

                        <div id="testResult" class="test-result"></div>
                    </div>
                </div>

                <h3>‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
                <div id="bookingList"></div>
            </div>
        </div>
    </div>

    <!-- Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß -->
    <div class="review-modal" id="reviewModal">
        <div class="review-modal-content">
            <h2>‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h2>
            <input type="text" id="reviewerName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)">
            <div class="stars" id="modalStars">
                <span onclick="setModalRating(1)">‚òÖ</span>
                <span onclick="setModalRating(2)">‚òÖ</span>
                <span onclick="setModalRating(3)">‚òÖ</span>
                <span onclick="setModalRating(4)">‚òÖ</span>
                <span onclick="setModalRating(5)">‚òÖ</span>
            </div>
            <textarea id="reviewComment" placeholder="‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô (‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)" rows="3"></textarea>
            <div class="button-group">
                <button onclick="submitReview()">‡∏™‡πà‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</button>
            </div>
            <p id="thanksMsg"></p>
        </div>
    </div>

    <!-- Load EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3.2.0/dist/email.min.js"></script>

    <script>
        
              // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà
        function toggleMobileMenu() {
            const mobileNav = document.getElementById("mobileNav");
            const overlay = document.getElementById("overlay");
            
            mobileNav.classList.toggle("active");
            overlay.classList.toggle("active");
            
            // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏Å‡∏£‡∏≠‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏õ‡∏¥‡∏î
            document.body.style.overflow = mobileNav.classList.contains("active") ? "hidden" : "";
        }
        // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ global
        const timeSelect = document.getElementById("time");
        for (let h = 8; h <= 20; h++) {
            let option = document.createElement("option");
            option.value = `${h}:00`;
            option.textContent = `${h}:00`;
            timeSelect.appendChild(option);
        }

        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('date').min = today;

        let booking = {};
        let bookingLocked = false;
        let currentRating = 0;
        let isLoggedIn = localStorage.getItem('isLoggedIn') === 'true' || false;
        let holidays = JSON.parse(localStorage.getItem('holidays')) || ["2025-09-01", "2025-09-10"];
        let services = JSON.parse(localStorage.getItem('services')) || [
            { name: "‡∏™‡∏£‡∏∞ - ‡πÑ‡∏î‡∏£‡πå ‡∏ú‡∏°‡∏ï‡∏£‡∏á", price: "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà 60-150 ‡∏ö‡∏≤‡∏ó" },
            { name: "‡∏™‡∏£‡∏∞ - ‡πÑ‡∏î‡∏£‡πå ‡∏´‡∏ô‡∏µ‡∏ö", price: "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà 80-150 ‡∏ö‡∏≤‡∏ó" },
            { name: "‡∏™‡∏£‡∏∞‡∏ú‡∏° - ‡πÄ‡∏î‡πá‡∏Å‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô", price: "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà 20-80 ‡∏ö‡∏≤‡∏ó" },
            { name: "‡∏™‡∏õ‡∏≤‡∏ô‡∏≤‡πÇ‡∏ô", price: "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà 399 ‡∏ö‡∏≤‡∏ó" }
        ];
        let promotions = JSON.parse(localStorage.getItem('promotions')) || [];
        let reviews = JSON.parse(localStorage.getItem('reviews')) || [];
        let bookings = JSON.parse(localStorage.getItem('bookings')) || [];

        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Email - ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ù‡∏±‡∏á‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏´‡∏•‡∏±‡∏Å!)
        let emailConfig = {
            publicKey: 'gxAXWtkmg5TT3Rm-E', // ‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
            serviceID: 'service_muk157', // ‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
            templateID: 'template_muk157', // ‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
            adminEmail: 'muksalonwelcomes@gmail.com' // ‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
        };

        // ‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å localStorage ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï)
        try {
            const savedConfig = localStorage.getItem('emailConfig');
            if (savedConfig) {
                const parsedConfig = JSON.parse(savedConfig);
                // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏ô localStorage
                Object.keys(parsedConfig).forEach(key => {
                    if (parsedConfig[key]) {
                        emailConfig[key] = parsedConfig[key];
                    }
                });
            }
        } catch (e) {
            console.log('‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ EmailJS ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô');
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
        window.addEventListener('DOMContentLoaded', (event) => {
            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô EmailJS ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ
            if (emailConfig.publicKey && emailConfig.publicKey !== 'your_public_key_here') {
                emailjs.init(emailConfig.publicKey);
            }
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏° (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô)
            document.getElementById('emailJSPublicKey').value = emailConfig.publicKey;
            document.getElementById('emailJSServiceID').value = emailConfig.serviceID;
            document.getElementById('emailJSTemplateID').value = emailConfig.templateID;
            document.getElementById('adminEmail').value = emailConfig.adminEmail;
            
            // ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏´‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏¢‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÑ‡∏ß‡πâ
            if (isLoggedIn) {
                document.body.classList.add('logged-in');
            }
            
            renderHolidays();
            renderServices();
            renderPromotions();
            renderReviews();
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏•‡∏π‡∏Å‡πÄ‡∏•‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©
            createFloatingIcons();
            createParticles();
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
            showPage('booking');
        });


        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á floating icons
        function createFloatingIcons() {
            const icons = ['üíá', 'üíÖ', 'üíñ', '‚ú®', 'üåü', 'üéÄ', 'üí´', 'üå∏'];
            const container = document.getElementById('floatingIcons');
            
            for (let i = 0; i < 15; i++) {
                const icon = document.createElement('div');
                icon.className = 'floating-icon';
                icon.textContent = icons[Math.floor(Math.random() * icons.length)];
                icon.style.left = Math.random() * 100 + 'vw';
                icon.style.top = Math.random() * 100 + 'vh';
                icon.style.animationDelay = Math.random() * 20 + 's';
                icon.style.fontSize = (Math.random() * 20 + 16) + 'px';
                icon.style.color = `hsl(${Math.random() * 360}, 70%, 60%)`;
                container.appendChild(icon);
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á confetti
        function createConfetti() {
            const colors = ['#d291bc', '#4a154b', '#ffdfd3', '#06C755', '#ffc107'];
            const container = document.getElementById('confettiContainer');
            
            for (let i = 0; i < 150; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                container.appendChild(confetti);
                
                const animation = confetti.animate([
                    { transform: `translateY(0) rotate(0deg)`, opacity: 1 },
                    { transform: `translateY(${window.innerHeight}px) rotate(${Math.random() * 360}deg)`, opacity: 0 }
                ], {
                    duration: Math.random() * 3000 + 2000,
                    easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)'
                });
                
                animation.onfinish = () => confetti.remove();
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏î‡πà‡∏ß‡∏ô
        function quickLogin() {
            const password = prompt("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô");
            if (password === "muksalon157") {
                isLoggedIn = true;
                document.body.classList.add('logged-in');
                localStorage.setItem('isLoggedIn', 'true');
                showNotification('‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô', 'success');
                showPage('manage');
            } else {
                showNotification('‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', 'error');
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô
        function loginWithLine() {
            const password = prompt("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô");
            
            if (password === "muksalon157") {
                isLoggedIn = true;
                document.body.classList.add('logged-in');
                localStorage.setItem('isLoggedIn', 'true');
                showNotification('‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô', 'success');
                showPage('manage');
            } else {
                showNotification('‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', 'error');
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏≠‡∏≤‡∏ó‡πå
        function logout() {
            isLoggedIn = false;
            document.body.classList.remove('logged-in');
            localStorage.setItem('isLoggedIn', 'false');
            showNotification('‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏≠‡∏≤‡∏ó‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢', 'success');
            showPage('booking');
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤
        function showPage(page) {
            document.querySelectorAll(".page").forEach(p => p.classList.remove("activePage"));
            document.getElementById(page).classList.add("activePage");
            document.querySelectorAll("nav button").forEach(b => b.classList.remove("active"));
            document.querySelectorAll(".mobile-nav button").forEach(b => b.classList.remove("active"));

            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà active
            const navButtons = document.querySelectorAll("nav button, .mobile-nav button");
            for (let btn of navButtons) {
                if (btn.textContent === "‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å" && page === "home") btn.classList.add("active");
                if (btn.textContent === "‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß" && page === "booking") btn.classList.add("active");
                if (btn.textContent === "‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô" && page === "promo") btn.classList.add("active");
                if (btn.textContent === "‡∏£‡∏µ‡∏ß‡∏¥‡∏ß" && page === "reviews") btn.classList.add("active");
            }

            if (page === "booking") resetBookingForm();
            if (page === "home") {
                renderHolidays();
                renderServices();
            }
            if (page === "promo") renderPromotions();
            if (page === "reviews") renderReviews();
            if (page === "manage") renderBookings();
            
            // ‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤
            if (window.innerWidth <= 767) {
                toggleMobileMenu();
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Email
        function saveEmailConfig() {
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏°
            emailConfig.publicKey = document.getElementById('emailJSPublicKey').value;
            emailConfig.serviceID = document.getElementById('emailJSServiceID').value;
            emailConfig.templateID = document.getElementById('emailJSTemplateID').value;
            emailConfig.adminEmail = document.getElementById('adminEmail').value;

            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á localStorage (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï)
            localStorage.setItem('emailConfig', JSON.stringify(emailConfig));
            
            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô EmailJS ‡πÉ‡∏´‡∏°‡πà
            if (emailConfig.publicKey && emailConfig.publicKey !== 'your_public_key_here') {
                emailjs.init(emailConfig.publicKey);
            }
            
            showNotification('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Email ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Email
        function testEmailConnection() {
            if (!emailConfig.publicKey || emailConfig.publicKey === 'your_public_key_here' ||
                !emailConfig.serviceID || emailConfig.serviceID === 'your_service_id_here' ||
                !emailConfig.templateID || emailConfig.templateID === 'your_template_id_here' ||
                !emailConfig.adminEmail || emailConfig.adminEmail === 'your_email@example.com') {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ EmailJS ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏î‡∏™‡∏≠‡∏ö', 'error');
                return;
            }

            const testResult = document.getElementById('testResult');
            testResult.style.display = 'block';
            testResult.className = 'test-result';
            testResult.innerHTML = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠...';

            sendTestEmail()
                .then((success) => {
                    if (success) {
                        testResult.classList.add('success');
                        testResult.innerHTML = '‚úÖ ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß';
                        showNotification('‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');
                    } else {
                        testResult.classList.add('error');
                        testResult.innerHTML = '‚ùå ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß: ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÑ‡∏î‡πâ';
                        showNotification('‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß', 'error');
                    }
                })
                .catch(error => {
                    testResult.classList.add('error');
                    testResult.innerHTML = '‚ùå ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß: ' + error;
                    showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö', 'error');
                });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö
        async function sendTestEmail() {
            const testHtml = `
                <div style="font-family: Arial, sans-serif; font-size: 14px; line-height: 1.6;">
                    <h2 style="color: #4a154b;">üîî ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏ß‡∏¢‡∏°‡∏∏‡∏Å‡∏ã‡∏≤‡∏•‡∏≠‡∏ô</h2>
                    <p>‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ EmailJS ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥</p>
                    <div style="background: #f9f0ff; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <p><strong>üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏î‡∏™‡∏≠‡∏ö:</strong> ${new Date().toLocaleString('th-TH')}</p>
                        <p><strong>‚úÖ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</strong> ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß</p>
                    </div>
                    <p>‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏•‡πâ‡∏ß</p>
                </div>
            `;

            return await sendEmailNotification(
                "üîî ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏ß‡∏¢‡∏°‡∏∏‡∏Å‡∏ã‡∏≤‡∏•‡∏≠‡∏ô",
                testHtml
            );
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô Email
        async function sendEmailNotification(subject, htmlMessage) {
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
            if (!emailConfig.publicKey || emailConfig.publicKey === 'your_public_key_here' ||
                !emailConfig.serviceID || emailConfig.serviceID === 'your_service_id_here' ||
                !emailConfig.templateID || emailConfig.templateID === 'your_template_id_here' ||
                !emailConfig.adminEmail || emailConfig.adminEmail === 'your_email@example.com') {
                console.warn("‚ùå ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Email ‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô");
                return false;
            }

            try {

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô EmailJS ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ô‡πà‡πÉ‡∏à
        emailjs.init(emailConfig.publicKey);

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ó‡∏°‡πÄ‡∏û‡∏•‡∏ï
        const templateParams = {
            to_email: emailConfig.adminEmail,
            subject: subject,
            message_html: htmlMessage,
            from_name: "‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏ß‡∏¢‡∏°‡∏∏‡∏Å‡∏ã‡∏≤‡∏•‡∏≠‡∏ô",
            // ‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÉ‡∏ô‡πÄ‡∏ó‡∏°‡πÄ‡∏û‡∏•‡∏ï)
            name: booking.name || "‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏î‡∏™‡∏≠‡∏ö",
            phone: booking.phone || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏",
            date: booking.date ? formatDateThai(booking.date) : new Date().toLocaleDateString('th-TH'),
            time: booking.time || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏",
            services: booking.services ? booking.services.map(s => `<li>${s}</li>`).join("") : "<li>‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö</li>",
            created_at: new Date().toLocaleString('th-TH')
        };

        console.log("üìã ‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á:", templateParams);

        const response = await emailjs.send(
            emailConfig.serviceID, 
            emailConfig.templateID, 
            templateParams
        );

        console.log("‚úÖ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•:", response);
        
        if (response.status === 200) {
            console.log("‚úÖ ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
            return true;
        } else {
            throw new Error(`EmailJS error: ${response.status} - ${response.text}`);
        }
    } catch (error) {
        console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•:", error);
        
        // ‡πÅ‡∏™‡∏î‡∏á error ‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
        if (error.text) {
            console.error("‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î error:", error.text);
        }
        
        return false;
    }
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏ó‡∏¢ (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ)
function formatDateThai(dateString) {
    const date = new Date(dateString);
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    return date.toLocaleDateString('th-TH', options);
}

         // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏à‡∏≠‡∏á
        function resetBookingForm() {
            booking = {};
            bookingLocked = false;
            document.querySelectorAll("#booking .box").forEach(b => b.style.display = "none");
            document.getElementById("formBox").style.display = "block";
            document.getElementById("name").value = "";
            document.getElementById("phone").value = "";
            document.getElementById("date").value = "";
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
        function goToServiceSelection() {
            booking.name = document.getElementById("name").value;
            booking.phone = document.getElementById("phone").value;
            if (!booking.name || !booking.phone) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö', 'error');
                return;
            }
            
            const serviceSelection = document.getElementById("serviceSelection");
            serviceSelection.innerHTML = "";
            
            services.forEach((service, index) => {
                const serviceDiv = document.createElement("div");
                serviceDiv.className = "service-option";
                serviceDiv.innerHTML = `
                    <input type="checkbox" id="service-${index}" name="service" value="${service.name} - ${service.price}">
                    <label for="service-${index}">${service.name} - ${service.price}</label>
                `;
                serviceSelection.appendChild(serviceDiv);
            });
            
            document.getElementById("formBox").style.display = "none";
            document.getElementById("serviceBox").style.display = "block";
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô
        function goToCalendar() {
            booking.services = [];
            document.querySelectorAll('input[name="service"]:checked').forEach(checkbox => {
                booking.services.push(checkbox.value);
            });
            
            if (booking.services.length === 0) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£', 'error');
                return;
            }
            
            document.getElementById("serviceBox").style.display = "none";
            document.getElementById("calendarBox").style.display = "block";
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        function reviewBooking() {
            booking.date = document.getElementById("date").value;
            booking.time = document.getElementById("time").value;
            if (!booking.date || !booking.time) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤', 'error');
                return;
            }
            if (holidays.includes(booking.date)) {
                showNotification('‡∏ß‡∏±‡∏ô‡∏î‡∏±‡∏á‡∏Å‡∏•‡πà‡∏≤‡∏ß‡∏£‡πâ‡∏≤‡∏ô‡∏õ‡∏¥‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏≠‡∏∑‡πà‡∏ô', 'error');
                return;
            }
            
            document.getElementById("calendarBox").style.display = "none";
            document.getElementById("confirmBox").style.display = "block";
            
            let servicesList = "";
            booking.services.forEach(service => {
                servicesList += `<li>${service}</li>`;
            });
            
            document.getElementById("bookingInfo").innerHTML = 
                `<p><strong>‡∏ä‡∏∑‡πà‡∏≠:</strong> ${booking.name}</p>
                 <p><strong>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:</strong> ${booking.phone}</p>
                 <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</strong> ${booking.date}</p>
                 <p><strong>‡πÄ‡∏ß‡∏•‡∏≤:</strong> ${booking.time}</p>
                 <p><strong>‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:</strong></p>
                 <ul>${servicesList}</ul>`;
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        function editBooking() {
            document.getElementById("confirmBox").style.display = "none";
            document.getElementById("calendarBox").style.display = "block";
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        function lockBooking() {
            if (bookingLocked) return;
            bookingLocked = true;

            document.getElementById("confirmBox").innerHTML =
                `<p class="message">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏à‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏∞</p>`;

            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
            const newBooking = {
                name: booking.name,
                phone: booking.phone,
                date: booking.date,
                time: booking.time,
                services: booking.services,
                timestamp: new Date().toISOString()
            };
            bookings.push(newBooking);
            localStorage.setItem('bookings', JSON.stringify(bookings));

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á confetti
            createConfetti();

            // ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
            const bookingHtml = `
                <div style="font-family: Arial, sans-serif; font-size: 14px; line-height: 1.6;">
                    <h2 style="color: #4a154b;">‚úÖ ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡πÉ‡∏´‡∏°‡πà - ‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏ß‡∏¢‡∏°‡∏∏‡∏Å‡∏ã‡∏≤‡∏•‡∏≠‡∏ô</h2>
                    <p><strong>üë§ ‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:</strong> ${booking.name}</p>
                    <p><strong>üìû ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:</strong> ${booking.phone}</p>
                    <p><strong>üìÜ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</strong> ${booking.date}</p>
                    <p><strong>‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤:</strong> ${booking.time} ‡∏ô.</p>
                </div>
            `;

            sendEmailNotification("‚úÖ ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡πÉ‡∏´‡∏°‡πà - ‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏ß‡∏¢‡∏°‡∏∏‡∏Å‡∏ã‡∏≤‡∏•‡∏≠‡∏ô", bookingHtml)
                .then(success => {
                    if (success) {
                        console.log("‚úÖ ‡∏™‡πà‡∏á Email ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
                    } else {
                        console.warn("‚ùå ‡∏™‡πà‡∏á Email ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
                    }
                });

            // ‡πÅ‡∏™‡∏î‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
            setTimeout(() => {
                showReviewModal();
            }, 1500);
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        function cancelBooking() {
            document.getElementById("confirmBox").innerHTML =
                `<p class="message">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏∞</p>`;

            // ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
            const cancelHtml = `
                <div style="font-family: Arial, sans-serif; font-size: 14px; line-height: 1.6;">
                    <h2 style="color: #d32f2f;">‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á - ‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏ß‡∏¢‡∏°‡∏∏‡∏Å‡∏ã‡∏≤‡∏•‡∏≠‡∏ô</h2>
                    <p><strong>üë§ ‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:</strong> ${booking.name}</p>
                    <p><strong>üìû ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:</strong> ${booking.phone}</p>
                    <p><strong>üìÜ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</strong> ${booking.date}</p>
                </div>
            `;

            sendEmailNotification("‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á - ‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏ß‡∏¢‡∏°‡∏∏‡∏Å‡∏ã‡∏≤‡∏•‡∏≠‡∏ô", cancelHtml)
                .then(success => {
                    if (success) {
                        console.log("‚úÖ ‡∏™‡πà‡∏á Email ‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
                    } else {
                        console.warn("‚ùå ‡∏™‡πà‡∏á Email ‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
                    }
                });

            setTimeout(() => {
                showPage("booking");
            }, 2000);
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        function renderBookings() {
            const container = document.getElementById("bookingList");
            container.innerHTML = "";

            if (bookings.length === 0) {
                container.innerHTML = "<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</p>";
                return;
            }

            const sortedBookings = [...bookings].reverse();
            sortedBookings.forEach((booking, index) => {
                const bookingDiv = document.createElement("div");
                bookingDiv.className = "booking-item";

                let servicesList = "";
                booking.services.forEach(service => {
                    servicesList += `<li>${service}</li>`;
                });

                bookingDiv.innerHTML = `
                    <div class="booking-content">
                        <p><strong>üë§ ‡∏ä‡∏∑‡πà‡∏≠:</strong> ${booking.name}</p>
                        <p><strong>üìû ‡πÇ‡∏ó‡∏£:</strong> ${booking.phone}</p>
                        <p><strong>üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</strong> ${booking.date}</p>
                        <p><strong>‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤:</strong> ${booking.time}</p>
                        <div class="services-section">
                            <p><strong>üíá ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£:</strong></p>
                            <ul class="services-list">${servicesList}</ul>
                        </div>
                        <p><strong>üïí ‡∏à‡∏≠‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠:</strong> ${new Date(booking.timestamp).toLocaleString('th-TH')}</p>
                    </div>
                `;

                if (isLoggedIn) {
                    const actionsDiv = document.createElement("div");
                    actionsDiv.className = "booking-actions";
                    
                    const deleteBtn = document.createElement("button");
                    deleteBtn.textContent = "‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á";
                    deleteBtn.className = "delete-btn";
                    deleteBtn.onclick = function () {
                        const actualIndex = bookings.length - 1 - index;
                        deleteBooking(actualIndex);
                    };
                    
                    actionsDiv.appendChild(deleteBtn);
                    bookingDiv.appendChild(actionsDiv);
                }

                container.appendChild(bookingDiv);
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        function deleteBooking(index) {
            if (!isLoggedIn) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', 'error');
                return;
            }

            if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ô‡∏µ‡πâ?")) {
                bookings.splice(index, 1);
                localStorage.setItem('bookings', JSON.stringify(bookings));
                renderBookings();
                showNotification('‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <span>${message}</span>
                <button onclick="this.parentElement.remove()">&times;</button>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 3000);
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏ô‡∏∏‡∏†‡∏≤‡∏Ñ
        function createParticles() {
            const particlesContainer = document.createElement('div');
            particlesContainer.id = 'particles';
            particlesContainer.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: -1;
            `;
            document.body.appendChild(particlesContainer);

            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.style.cssText = `
                    position: absolute;
                    border-radius: 50%;
                    opacity: 0.5;
                    animation: float-particle 15s infinite linear;
                    width: ${Math.random() * 15 + 5}px;
                    height: ${Math.random() * 15 + 5}px;
                    left: ${Math.random() * 100}%;
                    top: ${Math.random() * 100}%;
                    animation-duration: ${Math.random() * 10 + 10}s;
                    animation-delay: ${Math.random() * 5}s;
                    background-color: rgba(255, 182, 193, ${Math.random() * 0.5 + 0.3});
                `;
                particlesContainer.appendChild(particle);
            }

            const style = document.createElement('style');
            style.textContent = `
                @keyframes float-particle {
                    0% { transform: translateY(0) translateX(0) rotate(0deg); }
                    100% { transform: translateY(-100vh) translateX(100px) rotate(360deg); }
                }
            `;
            document.head.appendChild(style);
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏µ‡∏ß‡∏¥‡∏ß
        function setModalRating(stars) {
            currentRating = stars;
            document.querySelectorAll("#modalStars span").forEach((s, i) => {
                s.classList.toggle("active", i < stars);
            });
        }

        function showReviewModal() {
            const modal = document.getElementById("reviewModal");
            modal.style.display = "flex";
            document.getElementById("reviewerName").value = "";
            document.getElementById("reviewComment").value = "";
            currentRating = 0;
            document.querySelectorAll("#modalStars span").forEach(s => {
                s.classList.remove("active");
            });
            document.getElementById("thanksMsg").innerText = "";
        }

        function closeReviewModal() {
            document.getElementById("reviewModal").style.display = "none";
        }

        function submitReview() {
            const reviewerName = document.getElementById("reviewerName").value || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠";
            const comment = document.getElementById("reviewComment").value;

            if (currentRating === 0) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏î‡∏≤‡∏ß‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß', 'error');
                return;
            }

            reviews.push({
                name: reviewerName,
                rating: currentRating,
                comment: comment,
                date: new Date().toLocaleDateString('th-TH')
            });
            localStorage.setItem('reviews', JSON.stringify(reviews));

            document.getElementById("thanksMsg").innerText = "‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡∏ß‡∏¥‡∏ß";

            setTimeout(() => {
                closeReviewModal();
                showPage("booking");
            }, 3000);
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
        function renderServices() {
            const ul = document.getElementById("servicesList");
            ul.innerHTML = "";
            services.forEach((service, index) => {
                let li = document.createElement("li");
                li.className = "service-item";
                li.innerHTML = `<span>${service.name} - ${service.price}</span>`;
                if (isLoggedIn) {
                    const deleteBtn = document.createElement("button");
                    deleteBtn.textContent = "‡∏•‡∏ö";
                    deleteBtn.className = "delete-btn";
                    deleteBtn.onclick = function () { deleteService(index); };
                    li.appendChild(deleteBtn);
                }
                ul.appendChild(li);
            });
        }

        function addService() {
            const name = document.getElementById("newServiceName").value;
            const price = document.getElementById("newServicePrice").value;
            if (!name || !price) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤', 'error');
                return;
            }
            services.push({ name, price });
            localStorage.setItem('services', JSON.stringify(services));
            document.getElementById("newServiceName").value = "";
            document.getElementById("newServicePrice").value = "";
            renderServices();
            showNotification('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
        }

        function deleteService(index) {
            if (!isLoggedIn) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', 'error');
                return;
            }
            if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ?")) {
                services.splice(index, 1);
                localStorage.setItem('services', JSON.stringify(services));
                renderServices();
                showNotification('‡∏•‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î
        function renderHolidays() {
            const ul = document.getElementById("holidayList");
            ul.innerHTML = "";
            holidays.forEach((day, index) => {
                let li = document.createElement("li");
                li.className = "holiday-item";
                li.innerHTML = `<span>${day}</span>`;
                if (isLoggedIn) {
                    const deleteBtn = document.createElement("button");
                    deleteBtn.textContent = "‡∏•‡∏ö";
                    deleteBtn.className = "delete-btn";
                    deleteBtn.onclick = function () { deleteHoliday(index); };
                    li.appendChild(deleteBtn);
                }
                ul.appendChild(li);
            });
        }

        function addHoliday() {
            const newHoliday = document.getElementById("newHoliday").value;
            if (!newHoliday) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà', 'error');
                return;
            }
            holidays.push(newHoliday);
            localStorage.setItem('holidays', JSON.stringify(holidays));
            document.getElementById("newHoliday").value = "";
            renderHolidays();
            showNotification('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
        }

        function deleteHoliday(index) {
            if (!isLoggedIn) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', 'error');
                return;
            }
            if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏ô‡∏µ‡πâ?")) {
                holidays.splice(index, 1);
                localStorage.setItem('holidays', JSON.stringify(holidays));
                renderHolidays();
                showNotification('‡∏•‡∏ö‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô
        function renderPromotions() {
            const container = document.getElementById("promoContent");
            container.innerHTML = "";
            if (promotions.length === 0) {
                container.innerHTML = "<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô</p>";
                return;
            }
            promotions.forEach((promo, index) => {
                const promoDiv = document.createElement("div");
                promoDiv.className = "promo-item";
                promoDiv.innerHTML = `
                    <h3>${promo.title}</h3>
                    <p>${promo.description}</p>
                    ${promo.image ? `<img src="${promo.image}" alt="${promo.title}">` : ''}
                `;
                if (isLoggedIn) {
                    const deleteBtn = document.createElement("button");
                    deleteBtn.textContent = "‡∏•‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô";
                    deleteBtn.className = "delete-btn";
                    deleteBtn.onclick = function () { deletePromo(index); };
                    promoDiv.appendChild(deleteBtn);
                }
                container.appendChild(promoDiv);
            });
        }

        function addPromo() {
            const title = document.getElementById("promoTitle").value;
            const description = document.getElementById("promoDescription").value;
            if (!title || !description) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô', 'error');
                return;
            }
            promotions.push({ title, description, image: "" });
            localStorage.setItem('promotions', JSON.stringify(promotions));
            document.getElementById("promoTitle").value = "";
            document.getElementById("promoDescription").value = "";
            renderPromotions();
            showNotification('‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
        }

        function deletePromo(index) {
            if (!isLoggedIn) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', 'error');
                return;
            }
            if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ?")) {
                promotions.splice(index, 1);
                localStorage.setItem('promotions', JSON.stringify(promotions));
                renderPromotions();
                showNotification('‡∏•‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡∏ß‡∏¥‡∏ß
        function renderReviews() {
            const container = document.getElementById("reviewsList");
            container.innerHTML = "";
            if (reviews.length === 0) {
                container.innerHTML = "<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</p>";
                return;
            }
            const sortedReviews = [...reviews].reverse();
            sortedReviews.forEach((review, index) => {
                const reviewDiv = document.createElement("div");
                reviewDiv.className = "review-item";
                let stars = "";
                for (let i = 0; i < 5; i++) {
                    stars += i < review.rating ? "‚òÖ" : "‚òÜ";
                }
                reviewDiv.innerHTML = `
                    <div class="review-name">${review.name}</div>
                    <div class="review-stars">${stars}</div>
                    <div>${review.comment || "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢"}</div>
                    <div style="font-size: 12px; color: #777;">${review.date}</div>
                `;
                if (isLoggedIn) {
                    const deleteBtn = document.createElement("button");
                    deleteBtn.textContent = "‡∏•‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß";
                    deleteBtn.className = "delete-btn";
                    deleteBtn.onclick = function () {
                        const actualIndex = reviews.length - 1 - index;
                        deleteReview(actualIndex);
                    };
                    reviewDiv.appendChild(deleteBtn);
                }
                container.appendChild(reviewDiv);
            });
        }

        function deleteReview(index) {
            if (!isLoggedIn) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', 'error');
                return;
            }
            if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏ô‡∏µ‡πâ?")) {
                reviews.splice(index, 1);
                localStorage.setItem('reviews', JSON.stringify(reviews));
                renderReviews();
                showNotification('‡∏•‡∏ö‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
            }
        }

        // ‡πÄ‡∏û‡∏¥‡πà‡∏° event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ô‡∏≠‡∏Å modal ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î
        document.getElementById("reviewModal").addEventListener("click", function (e) {
            if (e.target === this) {
                closeReviewModal();
                showPage("booking");
            }
        });
    </script>
</body>
</html>
